(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1592:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.addSpaceByLevel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"level",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="",n=e[t];for(n>1&&(r="└",n-=1);n>1;)r="　"+r,n-=1;return r&&a&&(r+=" "),r}},714:function(e,t,a){var r=a(8043);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(447)(r,n);r.locals&&(e.exports=r.locals)},7246:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return new Date(t).valueOf()-new Date(e).valueOf()};t.groupByDay=function(e){var t=e.reduce(function(e,t){var a=function(e){var t=new Date(e.createdDate);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t.toISOString()}(t);return e[a]||(e[a]=[]),e[a]=e[a].concat(t),e},{});return{days:Object.keys(t).sort(r),historiesByDay:t}},t.sortByDate=r},8043:function(e,t,a){(e.exports=a(446)(!1)).push([e.i,".date-input-fix {\n  padding: 6px 0 0px !important;\n  display: inline-flex !important;\n}",""])},8144:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(a(17));var n={convertPointToGeoJson:function(e){var t={type:"Point",coordinates:[]},a=[];return a.push(e.lng),a.push(e.lat),t.coordinates=a,t},convertPolygonToGeoJson:function(e){var t={type:"Polygon",coordinates:[]},a=[],r=[];return e.forEach(function(e,t){r.push([e.lng(),e.lat()])}),a.push(r),t.coordinates=a,t},convertTwoPolygonToGeoJson:function(e,t){var a={type:"MultiPolygon",coordinates:[]},n=[];if(!e||!t)return a;var o=[];if(Array.isArray(e)){for(var l=0;l<e.length;++l)o.push([e[l].lng,e[l].lat]);n.push(o)}else{if("MultiPolygon"!==(0,r.default)(e,"type")||!Array.isArray((0,r.default)(e,"coordinates")))return a;n=(0,r.default)(e,"coordinates")}return o=[],t.forEach(function(e,t){o.push([e.lng(),e.lat()])}),n.push(o),a.coordinates=n,a},convertMultiPolygonToGeoJson:function(e){var t=[];return e.forEach(function(e,a){var r=[];e.forEach(function(e,t){r.push([e.lng(),e.lat()])}),t.push(r)}),{type:1===t.length?"Polygon":"MultiPolygon",coordinates:t}},convertGeoJsonToMultiPolygon:function(e){var t=[],a=(0,r.default)(e,"coordinates");if(!a||!a.length)return t;for(var n=0;n<a.length;n++){for(var o=a[n],l=[],i=0;i<o.length;i++){var s=o[i];2===s.length&&l.push({lat:s[1],lng:s[0]})}l.length&&t.push(l)}return t},convertGeoJsonToPolygon:function(e){var t=[],a=(0,r.default)(e,"coordinates");if(!a||!a.length)return t;for(var n=a[0],o=0;o<n.length;o++){var l=n[o];2===l.length&&t.push({lat:l[1],lng:l[0]})}return t},convertGeoJsonToPoint:function(e){return{lat:e[1],lng:e[0]}},convertGeoJsonToMap:function(e,t){var a=[];switch(t){case"Point":a=n.convertGeoJsonToPoint(e);break;case"Polygon":a=n.convertGeoJsonToPolygon(e);break;case"MultiPolygon":a=n.convertGeoJsonToMultiPolygon(e)}return a}};t.default=n},8225:function(e,t,a){var r=a(8226);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(447)(r,n);r.locals&&(e.exports=r.locals)},8226:function(e,t,a){(e.exports=a(446)(!1)).push([e.i,".switch-wrapper {\n  position: relative;\n}\n\n.switch-wrapper > div {\n  position: absolute;\n}\n\n.fade-appear {\n  opacity: 0.01;\n}\n.fade-appear-active {\n  opacity: 1;\n  transition: all 500ms ease-in;\n}\n.fade-appear-done {\n  opacity: 1;\n}\n.fade-exit {\n  opacity: 1;\n}\n.fade-exit-active {\n  opacity: 0.01;\n  transition: all 250ms ease-out;\n}\n.fade-exit-done {\n  opacity: 0;\n}\n\n/* editor */\n.ql-toolbar.ql-snow {\n  border-left: 0px;\n  border-right: 0px;\n  border-top: 0px;\n  border-bottom: 1px solid #ccc;\n}\n.ql-container.ql-snow {\n  border: 0px;\n}",""])},8227:function(e,t,a){var r=a(8228);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(447)(r,n);r.locals&&(e.exports=r.locals)},8228:function(e,t,a){(e.exports=a(446)(!1)).push([e.i,".form-item-inline-1 {\n  display: inline-block;\n}\n\n.form-item-inline-2 {\n  display: inline-block;\n  margin-left: 32px;\n}\n\n.form-item-full {\n  max-width: 544px;\n}\n\n.marker-label {\n  transform: translateX(-50%)\n}\n\n@keyframes blink1{\n  0%{opacity: 0.4;}\n  40%{opacity: 1; color: red;}\n  60%{opacity: 1; color: red;}\n  100%{opacity: 0.4;}\n}\n@keyframes blinkbg1{\n  0%{opacity: 0.4;}\n  40%{opacity: 1; background-color: red;}\n  60%{opacity: 1; background-color: red;}\n  100%{opacity: 0.4;}\n}",""])},8328:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.insidePoly=function(e,t){var a,r,n=!1;for(a=0,r=e.length-1;a<e.length;r=a++)e[a].y>t.lng!=e[r].y>t.lng&&t.lat<(e[r].x-e[a].x)*(t.lng-e[a].y)/(e[r].y-e[a].y)+e[a].x&&(n=!n);return n}},8329:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.emailValidate=function(e){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},t.usernameValidate=function(e){return!!/^\w+$/.test(e)}},8330:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=m(a(0)),l=a(48),i=a(42),s=a(34),u=m(a(3)),c=a(26),d=a(43),f=a(130),p=a(906);function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e){return o.default.createElement(d.Slide,n({direction:"up"},e))}var v=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];return a=r=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleClose=function(){r.props.showDialog(null)},h(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.url,r=e.translate,n=e.title,l=e.name,i=e.children,s=e.customRightButtons,u=n||l;return u=r(u,{_:u}),o.default.createElement(d.Dialog,{fullScreen:!0,open:!0,onClose:this.handleClose,TransitionComponent:y},o.default.createElement(d.AppBar,{className:t.appBar},o.default.createElement(d.Toolbar,{variant:"dense"},o.default.createElement("div",{style:{display:"flex",width:"100%",alignItems:"baseline",justifyContent:"space-between"}},o.default.createElement("div",null,o.default.createElement(d.IconButton,{color:"inherit",onClick:this.handleClose,"aria-label":"Close"},o.default.createElement(f.Close,null)),u),o.default.createElement("div",{style:{flexGrow:1}}),o.default.createElement("div",null,s)))),i||o.default.createElement("object",{data:a,name:u,type:"application/pdf",width:"100%",height:"100%"},o.default.createElement("p",null,o.default.createElement("a",{href:a},r("ra.action.download")),".")))}}]),t}();v.propTypes={classes:u.default.object.isRequired,url:u.default.string.isRequired,translate:u.default.func,showDialog:u.default.func,title:u.default.string,name:u.default.string,children:u.default.any,customLeftButtons:u.default.any,customRightButtons:u.default.any};var b=(0,l.compose)(s.translate,(0,c.withStyles)({appBar:{position:"relative"},flex:{flex:1}}),(0,i.connect)(null,{showDialog:p.showDialog}));t.default=b(v)},8331:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,n=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(a.push(l.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=a(0),s=b(i),u=b(a(3)),c=b(a(8332)),d=b(a(8336)),f=a(34),p=a(117),m=b(a(86)),h=b(a(1017)),y=b(a(7186)),v=b(a(8337));function b(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=function(e){var t=e.basePath,a=e.permission;return s.default.createElement(f.CardActions,null,s.default.createElement(h.default,{style:{margin:"8px"},basePath:t,permission:a}))};E.propTypes={basePath:u.default.string,permission:u.default.object};var w=(0,m.default)(r=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,l=Array(n),i=0;i<n;i++)l[i]=arguments[i];return a=r=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={columnData:[]},r.categorizeTask=function(e){var t=Object.entries((0,c.default)(e,"status")),a=[],r=!0,n=!1,l=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value,f=o(u,2),p={columnTitle:f[0],issues:[]},m=f[1].map(function(e){return(0,d.default)(e,function(e,t){switch(t){case"name":return"content";default:return t}})});p.issues=m,a.push(p)}}catch(e){n=!0,l=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw l}}return a},g(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dataProvider,r=t.projectKey;a(p.URL_ONLY,"Tasks",{filter:{where:{projectKey:r}}}).then(function(e){var t=e.data.url;return fetch(t)}).then(function(e){return e.json()}).then(function(t){return e.setState({columnData:e.categorizeTask(t)})})}},{key:"render",value:function(){var e=this.state.columnData,t=this.props,a=t.title,r=t.basePath,o=t.screenName,l=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(t,["title","basePath","screenName"]);return s.default.createElement(y.default,n({rawTitle:a,header:!0,card:!0,actions:s.default.createElement(E,{basePath:r,permission:{name:o,action:"create"}})},l),s.default.createElement(v.default,{columnData:e}))}}]),t}())||r;w.propTypes={basePath:u.default.string,dataProvider:u.default.func,title:u.default.string,projectKey:u.default.string,screenName:u.default.string},t.default=w},8337:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(0),i=f(l),s=f(a(3)),u=f(a(86)),c=a(117),d=f(a(8338));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=(0,u.default)(r=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,l=Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={columnData:[]},r.translateTitle=function(e){switch(e){case"Cần làm":return"todo";case"Đang làm":return"doing";case"Hoàn thành":return"finish";default:return e}},r.updateStatus=function(e,t){var a=r.props.dataProvider,n={id:e,status:t};"finish"===t&&(n.finishDate=new Date),a(c.CUSTOM,"Tasks",{method:"PATCH",subUrl:"updateStatus",body:n})},r.onDragEnd=function(e){var t=e.destination,a=e.source,o=e.draggableId;if(t&&(t.droppableId!==a.droppableId||t.index!==a.index)){var l=r.state.columnData,i=l[l.findIndex(function(e){return e.columnTitle===a.droppableId})],s=l[l.findIndex(function(e){return e.columnTitle===t.droppableId})];if(i===s){var u=Array.from(i.issues),c=u[u.findIndex(function(e){return e.id===o})];u.splice(a.index,1),u.splice(t.index,0,c);var d=n({},i,{issues:u});l[l.findIndex(function(e){return e.columnTitle===a.droppableId})]=d}else{var f=Array.from(i.issues),p=f[f.findIndex(function(e){return e.id===o})];f.splice(a.index,1);var m=n({},i,{issues:f}),h=Array.from(s.issues),y=r.translateTitle(t.droppableId);p.status=y,h.splice(t.index,0,p);var v=n({},s,{issues:h});l[l.findIndex(function(e){return e.columnTitle===a.droppableId})]=m,l[l.findIndex(function(e){return e.columnTitle===t.droppableId})]=v,r.updateStatus(o,y)}r.setState({columnData:l})}},p(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),o(t,[{key:"componentDidUpdate",value:function(e){this.props.columnData!==e.columnData&&this.setState({columnData:this.props.columnData})}},{key:"render",value:function(){var e=this.state.columnData;return i.default.createElement(d.default,{columnData:e,onDragEnd:this.onDragEnd})}}]),t}())||r;m.propTypes={columnData:s.default.arrayOf(s.default.object),dataProvider:s.default.func},t.default=m},8338:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(0),o=f(n),l=f(a(3)),i=f(a(122)),s=a(26),u=a(1025),c=f(a(1051)),d=f(a(8350));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];return a=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={columnOrder:{todo:0,doing:1,finish:2}},r.sortByDefinedOrder=function(e){var t=r.state.columnOrder;return e.sort(function(e,a){return t[e.columnTitle]-t[a.columnTitle]}),e},r.createEmptyColumnForMissingOne=function(e){var t=r.state.columnOrder,a=Object.keys(t),n=e.map(function(e){return e.columnTitle}),o=(0,c.default)(a,n);if(o.length>0){var l=!0,i=!1,s=void 0;try{for(var u,d=o[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;e.push({issues:[],columnTitle:f})}}catch(e){i=!0,s=e}finally{try{!l&&d.return&&d.return()}finally{if(i)throw s}}}return e},p(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.columnData,a=e.classes,r=e.onDragEnd,n=this.sortByDefinedOrder(this.createEmptyColumnForMissingOne(t));return o.default.createElement(i.default,{className:a.root,elevation:0,square:!0},o.default.createElement(u.DragDropContext,{onDragEnd:r},n.map(function(e){var t=e.issues,a=e.columnTitle;return o.default.createElement(d.default,{issues:t,columnTitle:a,key:a})})))}}]),t}();m.propTypes={columnData:l.default.arrayOf(l.default.object),classes:l.default.object,onDragEnd:l.default.func},t.default=(0,s.withStyles)(function(e){return{root:{display:"flex",marginLeft:e.spacing(1)}}})(m)},8350:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=p(a(0)),o=p(a(3)),l=p(a(607)),i=p(a(608)),s=p(a(76)),u=a(26),c=p(a(20)),d=a(1025),f=p(a(8351));function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){switch(e){case"todo":return"Cần làm";case"doing":return"Đang làm";case"finish":return"Hoàn thành";default:return e}},h=function(e){var t=e.columnTitle,a=e.issues,o=e.classes,u=m(t);return n.default.createElement("div",{className:(0,c.default)(o.root,o[t])},n.default.createElement(s.default,{className:o.header,variant:"headline"},u),n.default.createElement(l.default,{className:o.list},n.default.createElement(d.Droppable,{droppableId:t},function(e){return n.default.createElement("div",r({ref:e.innerRef},e.droppableProps,{className:o.droppable}),a.map(function(e,t){var a=e.content,r=e.status,l=e.assigneeId,s=e.id,u=m(r);return n.default.createElement(i.default,{className:o.listItem,key:s},n.default.createElement(f.default,{content:a,status:r,translatedStatus:u,assigneeId:l,id:s,index:t}))}),e.placeholder)})))};h.propTypes={columnTitle:o.default.string,issues:o.default.arrayOf(o.default.object),classes:o.default.object},t.default=(0,u.withStyles)(function(e){return{root:{flexBasis:"calc(100% / 3)",backgroundColor:e.palette.grey[200],paddingBlockStart:e.spacing(1)+2+"px",margin:e.spacing(1),flexGrow:1,borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},todo:{borderTop:"5px solid skyblue"},doing:{borderTop:"5px solid limegreen"},finish:{borderTop:"5px solid indianred"},header:{marginLeft:e.spacing(2)},list:{maxHeight:"60vh",overflow:"auto"},droppable:{minHeight:"200px"},listItem:{paddingLeft:e.spacing(1)-1,paddingRight:e.spacing(1)-1,paddingTop:0}}})(h)},8351:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=y(a(0)),o=y(a(3)),l=a(26),i=y(a(276)),s=y(a(406)),u=y(a(254)),c=y(a(600)),d=a(1025),f=y(a(20)),p=a(13),m=y(a(192)),h=y(a(8352));function y(e){return e&&e.__esModule?e:{default:e}}var v=function(e){var t=e.content,a=e.status,o=e.translatedStatus,l=e.assigneeId,y=e.id,v=e.index,b=e.classes;return t&&a&&l?n.default.createElement(d.Draggable,{draggableId:y,index:v},function(e){return n.default.createElement("div",r({className:b.draggable,ref:e.innerRef},e.draggableProps,e.dragHandleProps),n.default.createElement(i.default,{className:b.root},n.default.createElement(s.default,{className:b.contentContainer},n.default.createElement(m.default,{isLink:!0,innerClass:b.content,permission:{name:"Taskboard",action:"show"},linkTo:(0,p.linkToRecord)("/taskboards",y,"show")},t)),n.default.createElement(u.default,{className:b.actions,disableSpacing:!0},n.default.createElement(c.default,{className:(0,f.default)(b.chip,b[a]),label:o}),n.default.createElement("div",{className:b.assignee},n.default.createElement(h.default,{key:l,assigneeId:l})))))}):null};v.propTypes={content:o.default.string,status:o.default.string,translatedStatus:o.default.string,assigneeId:o.default.string,id:o.default.string,index:o.default.number,classes:o.default.object},t.default=(0,l.withStyles)(function(e){return{draggable:{width:"100%"},root:{width:"100%"},actions:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},contentContainer:{paddingBottom:0,fontWeight:"bold",overflowWrap:"word-break"},content:{fontWeight:"bold",color:"#2E2E2E",textDecoration:"none","&:hover":{textDecoration:"underline",cursor:"pointer"}},chip:{margin:e.spacing(1),width:"82px",height:"28px"},todo:{background:"skyblue"},doing:{background:"limegreen"},finish:{background:"#cd5c5c94"},assignee:{display:"flex",justifyContent:"flex-end",flexWrap:"wrap"},avatar:{margin:e.spacing(1)}}})(v)},8352:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(a(0)),n=u(a(3)),o=u(a(482)),l=u(a(478)),i=a(26),s=a(34);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.record,a=e.source,n=e.classes;return t[a]?r.default.createElement(l.default,{title:"Thực hiện bởi "+t[a]},r.default.createElement(o.default,{className:n.avatar},t[a][0])):null};c.propTypes={record:n.default.object,source:n.default.string,classes:n.default.object};var d=function(e){var t=e.assigneeId,a=e.classes;return r.default.createElement(s.ReferenceField,{basePath:"Tasks",resource:"Tasks",className:a.fullName,record:{assigneeId:t},source:"assigneeId",reference:"appusers"},r.default.createElement(c,{record:{},classes:a,source:"username"}))};d.propTypes={assigneeId:n.default.string,classes:n.default.object},t.default=(0,i.withStyles)(function(e){return{avatar:{margin:e.spacing(1)}}})(d)},8353:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l=a(0),i=_(l),s=_(a(3)),u=a(48),c=a(43),d=a(34),f=a(65),p=_(a(1450)),m=_(a(1449)),h=_(a(1415)),y=_(a(7236)),v=_(a(192)),b=_(a(86)),g=_(a(8354)),E=a(340),w=_(a(7237)),O=_(a(8355));function _(e){return e&&e.__esModule?e:{default:e}}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}var j=function(e){var t=e.basePath,a=e.translate,r=e.screenName,n=e.data,l=e.permissions,s=(e.hasEdit,e.hasList,P(e,["basePath","translate","screenName","data","permissions","hasEdit","hasList"]));return i.default.createElement(d.CardActions,{style:{zIndex:2,display:"inline-block",float:"right"}},n&&i.default.createElement(y.default,{permission:r&&l.includes("edit")?{name:r,action:"edit"}:{},component:f.Link,to:(0,d.linkToRecord)(t,n.id,"edit")}),n&&i.default.createElement(w.default,o({record:n,permission:r&&l.includes("delete")?{name:r,action:"delete"}:{},basePath:t,undoable:!1},s)),i.default.createElement(v.default,{label:a("ra.action.list"),permission:r&&l.includes("list")?{name:r,action:"view"}:{},component:f.Link,to:t},i.default.createElement(g.default,null)))};j.propTypes={basePath:s.default.string,translate:s.default.func,screenName:s.default.string,data:s.default.object,permissions:s.default.array,hasEdit:s.default.bool,hasList:s.default.bool};var x=(0,b.default)(r=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];return a=r=k(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={userId:"",hasEdit:!0,enumField:[],histories:[]},r.translateStatus=function(e,t){return r.props.translate("ra.tasks.fields."+e+"."+t)},r.updateHistories=function(){var e=r.props,t=e.id;(0,e.dataProvider)(d.GET_LIST,"taskhistories",{filter:{taskId:t},pagination:{page:1,perPage:1e3}}).then(function(e){e.data&&e.data.length>=0&&r.setState({histories:e.data})})},r.enumField=function(){r.props.dataProvider(d.CUSTOM,"Tasks",{subUrl:"getAllEnum"}).then(function(e){var t=e.data,a={status:t.status.map(function(e){return{id:e,name:r.props.translate("resources.tasks.fields.statuses."+e)}}),type:t.type.map(function(e){return{id:e,name:r.props.translate("resources.tasks.fields.types."+e)}}),priority:t.priority.map(function(e){return{id:e,name:r.props.translate("resources.tasks.fields.priorities."+e)}})};r.setState({enumField:a})})},r.renderFiles=function(e){var t={textDecoration:"none"};return e&&e.attachedFiles&&e.attachedFiles.map(function(e){return i.default.createElement(c.Grid,{middle:"true",item:!0,sm:12,xs:12,key:e.url},i.default.createElement("a",{style:t,href:e.url,download:!0},e.name))})},k(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),n(t,[{key:"componentDidMount",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function r(n,o){try{var l=t[n](o),i=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=E.Storage.getUser(),a=t.userId,this.setState({userId:a}),this.enumField(),this.updateHistories();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.enumField,r=t.histories,n=this.props,s=(n.redirect,n.translate),u=(n.dataProvider,n.updateHistories,n.classes,n.dispatch,n.screenName),f=n.permissions,y=(n.hasList,n.hasEdit,n.hasShow,n.hasCreate,P(n,["redirect","translate","dataProvider","updateHistories","classes","dispatch","screenName","permissions","hasList","hasEdit","hasShow","hasCreate"])),v=this.props.basePath;return i.default.createElement(l.Fragment,null,i.default.createElement(h.default,o({title:s("ra.tasks.show"),actions:i.default.createElement(j,o({basePath:v,screenName:u,permissions:f,translate:s},y))},y),i.default.createElement(p.default,o({redirect:"list"},y,{disabletoolbar:!0}),i.default.createElement(m.default,{key:1,label:"Thông tin công việc",redirect:"list"},i.default.createElement(c.Grid,{middle:!0,container:!0,spacing:2},i.default.createElement(c.Grid,{middle:!0,item:!0,sm:12,xs:12},i.default.createElement(d.TextField,{source:"name",label:s("ra.tasks.fields.name")})),i.default.createElement(c.Grid,{middle:!0,item:!0,sm:6,xs:12},i.default.createElement(d.FunctionField,{source:"status",label:s("ra.tasks.fields.status"),render:function(e){return s("ra.tasks.statuses."+e.status)}})),i.default.createElement(c.Grid,{middle:!0,item:!0,sm:6,xs:12},i.default.createElement(d.FunctionField,{source:"type",label:s("ra.tasks.fields.type"),render:function(e){return s("ra.tasks.types."+e.type)}})),i.default.createElement(c.Grid,{middle:!0,item:!0,sm:6,xs:12},i.default.createElement(d.FunctionField,{source:"priority",label:s("ra.tasks.fields.priority"),render:function(e){return s("ra.tasks.priorities."+e.priority)}})),i.default.createElement(c.Grid,{middle:!0,item:!0,sm:6,xs:12},i.default.createElement(d.ReferenceField,{source:"assigneeId",resource:"tasks",reference:"appusers",label:s("ra.tasks.fields.assigneeId")},i.default.createElement(d.TextField,{source:"fullName"}))),i.default.createElement(c.Grid,{middle:!0,item:!0,sm:6,xs:12},i.default.createElement(d.DateField,{source:"startDate",label:s("ra.tasks.fields.startDate")})),i.default.createElement(c.Grid,{middle:!0,item:!0,sm:6,xs:12},i.default.createElement(d.DateField,{source:"dueDate",label:s("ra.tasks.fields.dueDate")})),i.default.createElement(c.Grid,{middle:!0,item:!0,sm:6,xs:12},i.default.createElement(d.TextField,{source:"estimateTime",label:s("ra.tasks.fields.estimateTime")})),i.default.createElement(c.Grid,{middle:!0,item:!0,sm:6,xs:12},i.default.createElement(d.DateField,{source:"finishDate",label:s("ra.tasks.fields.finishDate")})),i.default.createElement(c.Grid,{middle:!0,item:!0,sm:12,xs:12},i.default.createElement(d.RichTextField,{source:"description",label:s("ra.tasks.fields.description")})),i.default.createElement(c.Grid,{middle:!0,item:!0,sm:12,xs:12},i.default.createElement(d.ReferenceField,{label:s("ra.tasks.fields.attachedFiles"),source:"id",reference:"tasks",linkType:!1},i.default.createElement(d.FunctionField,{source:"attachedFiles",render:function(t){return e.renderFiles(t)}}))))),i.default.createElement(m.default,{key:2,label:"Lịch sử"},i.default.createElement(O.default,{dispatch:"",histories:r,enumField:a,updateHistories:this.updateHistories})))))}}]),t}())||r;x.propTypes={translate:s.default.func,hasList:s.default.bool,hasShow:s.default.bool,hasCreate:s.default.bool,hasEdit:s.default.bool,dataProvider:s.default.func,classes:s.default.any,dispatch:s.default.any,redirect:s.default.any,id:s.default.any,updateHistories:s.default.func,basePath:s.default.string,screenName:s.default.string,permissions:s.default.array};var T=(0,u.compose)(d.translate,b.default);t.default=T(x)},8355:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(0),i=g(l),s=g(a(3)),u=a(43),c=a(26),d=a(85),f=g(a(8356)),p=g(a(176)),m=a(34),h=g(a(86)),y=g(a(8358)),v=g(a(8361)),b=a(7246);function g(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=(0,m.translate)(r=(0,h.default)(r=function(e){function t(){var e,a,r,n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,l=Array(o),i=0;i<o;i++)l[i]=arguments[i];return a=r=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.postComment=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function r(n,o){try{var l=t[n](o),i=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function e(t){var a,o,l,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.props,o=a.record.id,l=a.dataProvider,i=a.updateHistories,t){e.next=3;break}return e.abrupt("return");case 3:l(d.CREATE,"taskhistories",{data:{taskId:o,description:t}}).then(function(){return i()});case 4:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),E(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.histories,r=(e.dataProvider,e.deleteComment,e.translate,function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["classes","histories","dataProvider","deleteComment","translate"])),o=(0,b.groupByDay)(a),l=o.days,s=o.historiesByDay;return i.default.createElement(u.Grid,{className:t.hr,container:!0,spacing:0},i.default.createElement(v.default,n({postComment:this.postComment},r)),i.default.createElement(u.Grid,{item:!0,sm:12,xs:12},l&&a&&l.map(function(e){return i.default.createElement("div",{key:e,className:t.day},i.default.createElement(u.Typography,{variant:"subheading",gutterBottom:!0,className:t.daySubheading},function(e){return(0,f.default)((0,p.default)(e).format("dddd, DD/MM/YYYY"))}(e)),i.default.createElement(u.Card,{className:t.card},i.default.createElement(u.List,null,i.default.createElement(y.default,n({histories:s[e]},r)))))})))}}]),t}())||r)||r;w.propTypes={histories:s.default.array,classes:s.default.object,translate:s.default.any,dispatch:s.default.any,dataProvider:s.default.any,push:s.default.any,basePath:s.default.any,formRef:s.default.any,postComment:s.default.func,values:s.default.any,updateHistories:s.default.func,deleteComment:s.default.func,refresh:s.default.func,record:s.default.object},t.default=(0,c.withStyles)(function(e){return{hr:{borderTop:"1px solid #B7ACA5"},day:{marginBottom:"1em"},daySubheading:{marginTop:".5em"},card:{backgroundColor:e.palette.background.default}}})(w)},8358:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(0),i=h(l),s=h(a(3)),u=a(43),c=a(34),d=a(26),f=h(a(1103)),p=h(a(8360)),m=a(7246);function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=(0,c.translate)(r=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];return a=r=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={},r.editId=function(e){r.setState({editId:e.id})},r.editComment=function(e,t){(0,r.props.dataProvider)(c.CUSTOM,"taskhistories",{method:"POST",subUrl:"updateComment",body:{id:e,description:t}}).then(function(){var e=r.props.history;e.description=t,r.setState({editId:"",history:e})})},r.deleteComment=function(e){(0,r.props.dataProvider)(c.DELETE,"TaskHistories",{id:e}).then(function(){r.setState({history:""})})},r.cancelEditComment=function(){r.setState({editId:""})},r.optionMenuClose=function(){r.setState({anchorEl:null})},r.optionMenu=function(e){r.setState({anchorEl:e.currentTarget})},y(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.histories;return(0,f.default)(r,function(e){var t=e.activities,a=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["activities"]);return t?t.map(function(e){return n({activity:e},a)}):n({},a)}).sort(function(e,t){var a=e.createdDate,r=t.createdDate;return(0,m.sortByDate)(a,r)}).map(function(t){return i.default.createElement(l.Fragment,{key:t.id},i.default.createElement(u.ListItem,{alignitems:"flex-start"},i.default.createElement(u.ListItemAvatar,null,i.default.createElement(u.Avatar,{"aria-label":"Recipe"},"S")),i.default.createElement(u.ListItemText,{primary:i.default.createElement("span",null,i.default.createElement(c.ReferenceField,{label:"user",source:"creatorId",reference:"appusers",record:t,basePath:"/appusers"},i.default.createElement(c.FunctionField,{className:a.modifier,render:function(e){return e.fullName+" "}})),t.description.length>0?i.default.createElement("span",null,e.props.translate("ra.taskhistories.commented")+" ",t.description):t.activity&&i.default.createElement(p.default,{key:t.activity.field,activity:t.activity})),secondary:i.default.createElement(c.FunctionField,{className:a.timeCreate,render:function(){return new Date(t.createdDate).toLocaleTimeString()}})})))})}}]),t}())||r;v.propTypes={histories:s.default.array,classes:s.default.object,postComment:s.default.func,stopEdit:s.default.string,userId:s.default.string,formRef:s.default.any,values:s.default.any,dataProvider:s.default.func,updateHistories:s.default.func,editId:s.default.string,cancelEditComment:s.default.func,pushEditComment:s.default.func,deleteComment:s.default.func,refresh:s.default.func,translate:s.default.func,enumField:s.default.any,history:s.default.array},t.default=(0,d.withStyles)(function(){return{timeCreate:{color:"#8B8989"},modifier:{display:"inline"}}})(v)},8360:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(0),l=c(o),i=c(a(3)),s=a(43),u=a(85);function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,a(34).translate)(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),n(t,[{key:"render",value:function(){var e=this.props,t=e.activity,a=e.translate,r=e.classes,n=void 0,o=void 0;if(!t&&!t.field)return l.default.createElement("div",null,"no field");var i={value:{old:"",new:""}};switch(t.field){case"name":n=l.default.createElement(u.TextField,{className:r.commentStatus,source:"old",record:t.value}),o=l.default.createElement(u.TextField,{className:r.commentStatus,source:"new",record:t.value});break;case"description":n=l.default.createElement(u.HtmlField,{source:"old",record:t.value}),o=l.default.createElement(u.HtmlField,{source:"new",record:t.value});break;case"status":i.value.old=a("ra.tasks.statuses."+t.value.old),i.value.new=a("ra.tasks.statuses."+t.value.new),n=l.default.createElement(u.TextField,{className:r.commentStatus,source:"old",record:i.value}),o=l.default.createElement(u.TextField,{className:r.commentStatus,source:"new",record:i.value});break;case"type":i.value.old=a("ra.tasks.types."+t.value.old),i.value.new=a("ra.tasks.types."+t.value.new),n=l.default.createElement(u.TextField,{className:r.commentStatus,source:"old",record:i.value}),o=l.default.createElement(u.TextField,{className:r.commentStatus,source:"new",record:i.value});break;case"priority":i.value.old=a("ra.tasks.priorities."+t.value.old),i.value.new=a("ra.tasks.priorities."+t.value.new),n=l.default.createElement(u.TextField,{className:r.commentStatus,source:"old",record:i.value}),o=l.default.createElement(u.TextField,{className:r.commentStatus,source:"new",record:i.value});break;case"startDate":case"dueDate":n=l.default.createElement(u.DateField,{className:r.commentStatus,source:"old",record:t.value}),o=l.default.createElement(u.DateField,{className:r.commentStatus,source:"new",record:t.value});break;case"estimateTime":n=l.default.createElement(u.TextField,{className:r.commentStatus,source:"old",record:t.value}),o=l.default.createElement(u.TextField,{className:r.commentStatus,source:"new",record:t.value});break;case"attachedFiles":n=t.value.old.length>0?t.value.old.map(function(e){return l.default.createElement("a",{style:{textDecoration:"none"},key:e.url,href:e.url||""},e.name||a("resources.taskhistories.fields.blank"),"  ")}):a("resources.taskhistories.fields.blank"),o=t.value.new.length>0?t.value.new.map(function(e){return l.default.createElement("a",{style:{textDecoration:"none"},key:e.url,href:e.url||""},e.name||a("resources.taskhistories.fields.blank"),"  ")}):a("resources.taskhistories.fields.blank");break;case"assigneeId":n=l.default.createElement(u.ReferenceField,{className:r.commentStatus,source:"old",reference:"appusers",record:t.value,basePath:"/appusers"},l.default.createElement(u.TextField,{source:"fullName"})),o=l.default.createElement(u.ReferenceField,{className:r.commentStatus,source:"new",reference:"appusers",record:t.value,basePath:"/appusers"},l.default.createElement(u.TextField,{source:"fullName"}));break;default:n=t.value.old,o=t.value.new}return l.default.createElement("span",null,l.default.createElement("span",{className:r.changed},a("ra.taskhistories.changed"),"  "),a("ra.tasks.fields."+t.field),l.default.createElement("span",{className:r.changed},"  ",a("ra.taskhistories.from"),"  "),n,l.default.createElement("span",{className:r.changed},"  ",a("ra.taskhistories.tobe"),"  "),o)}}]),t}())||r;d.propTypes={activity:i.default.object,translate:i.default.func,classes:i.default.object},t.default=(0,s.withStyles)(function(e){return{changed:{color:e.palette.grey.A700,textTransform:"lowercase"},commentStatus:{width:"max-content",display:"inline-flex"}}})(d)},8361:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(0),l=p(o),i=p(a(3)),s=a(43),u=a(26),c=a(340),d=a(34),f=p(a(8362));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){var t=e.record;return t&&t.fullName?l.default.createElement(s.Tooltip,{title:t.fullName,placement:"left"},l.default.createElement(s.Avatar,null,"S")):null};h.propTypes={record:i.default.object};var y=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];return a=r=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={createDataLocal:"",editDataLocal:""},r.editDataLocal=function(e){e.preventDefault(),r.setState({editDataLocal:e.target.value})},r.createDataLocal=function(e){e.preventDefault(),r.setState({createDataLocal:e.target.value})},m(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),n(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.record,n=e.editId,i=e.history,u=e.editComment,p=e.postComment,m=this.state,y=m.editDataLocal,v=m.createDataLocal,b=c.Storage.getUser().userId;return l.default.createElement(o.Fragment,null,l.default.createElement(s.Grid,{container:!0,spacing:1,className:t.commentBox},l.default.createElement(s.Grid,{item:!0},l.default.createElement(d.ReferenceField,{label:"user",source:n?"creatorId":"userId",record:n?i:r({},i,{userId:b}),basePath:"/appusers",reference:"appusers"},l.default.createElement(h,{record:a}))),l.default.createElement(s.Grid,{item:!0,xs:7},n?l.default.createElement(s.TextField,{value:y,fullWidth:!0,onChange:this.editDataLocal,placeholder:"Bình luận của bạn"}):l.default.createElement(s.TextField,{value:v,fullWidth:!0,onChange:this.createDataLocal,placeholder:"Bình luận của bạn"})),l.default.createElement(s.Grid,{item:!0,className:t.submitButton},l.default.createElement(s.Button,{onClick:function(){return n?u(n,y):p(v)},className:t.submitButton},l.default.createElement(f.default,null)))))}}]),t}();y.propTypes={editComment:i.default.func,pushEditComment:i.default.func,cancelEditComment:i.default.func,classes:i.default.object,translate:i.default.func,dataProvider:i.default.func,basePath:i.default.any,postComment:i.default.func,editId:i.default.string,history:i.default.object,record:i.default.object},t.default=(0,u.withStyles)(function(){return{commentBox:{marginTop:"1em",marginBottom:"1em",padding:"1.5em",backgroundColor:"#EFE8E4",flexGrow:1},submitButton:{paddingLeft:"0"}}})(y)},8363:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(0),l=O(o),i=O(a(3)),s=a(48),u=a(34),c=a(54),d=O(a(176)),f=O(a(979)),p=a(43),m=a(117),h=O(a(706)),y=O(a(1411)),v=O(a(86)),b=O(a(710)),g=O(a(707)),E=O(a(983)),w=O(a(996));function O(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];return a=r=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={statusChoices:[],typeChoices:[],priorityChoices:[]},_(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),n(t,[{key:"componentDidMount",value:function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function r(n,o){try{var l=t[n](o),i=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function e(){var t,a,r,n,o,l,i,s,u,c,d,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.dataProvider,r=t.translate,e.next=3,a(m.CUSTOM,"Tasks",{subUrl:"getAllEnum"});case 3:n=e.sent,o=n.data,l=o.priority,i=o.status,s=o.type,u=i.map(function(e){return{id:e,name:r("ra.tasks.statuses."+e)}}),c=s.map(function(e){return{id:e,name:r("ra.tasks.types."+e)}}),d=l.map(function(e){return{id:e,name:r("ra.tasks.priorities."+e)}}),f={statusChoices:u,typeChoices:c,priorityChoices:d},this.setState(f);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.dataProvider,a=e.translate,n=e.projectKey,o=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["dataProvider","translate","projectKey"]);return l.default.createElement(y.default,r({title:"ra.action.edit"},o),l.default.createElement(b.default,{redirect:"list"},l.default.createElement(g.default,null,l.default.createElement(p.Grid,{middle:!0,container:!0,spacing:2},l.default.createElement(p.Grid,{middle:!0,item:!0,sm:12},l.default.createElement(u.LongTextInput,{label:a("ra.tasks.fields.name"),source:"name",validate:(0,u.required)()})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.SelectInput,{label:a("ra.tasks.fields.status"),source:"status",validate:(0,u.required)(),choices:this.state.statusChoices})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.SelectInput,{label:a("ra.tasks.fields.type"),source:"type",choices:this.state.typeChoices})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.SelectInput,{label:a("ra.tasks.fields.priority"),validate:(0,u.required)(),source:"priority",choices:this.state.priorityChoices})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.ReferenceInput,{resource:"Tasks",label:a("ra.tasks.fields.assigneeId"),source:"assigneeId",reference:"appusers",validate:(0,u.required)()},l.default.createElement(u.SelectInput,{optionText:"fullName"}))),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.FormDataConsumer,null,function(e){var t=e.formData,r=e.dispatch;return l.default.createElement(f.default,{label:a("ra.tasks.fields.startDate"),options:{defaultValue:new Date},inputProps:{onChange:function(e){r((0,c.change)(u.REDUX_FORM_NAME,"estimateTime",(0,d.default)(t.dueDate).diff((0,d.default)(e),"days").toString())),r((0,c.change)(u.REDUX_FORM_NAME,"startDate",(0,d.default)(e).toString()))}},source:"startDate"})})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.FormDataConsumer,null,function(e){var t=e.formData,r=e.dispatch;return l.default.createElement(f.default,{label:a("ra.tasks.fields.dueDate"),inputProps:{onChange:function(e){r((0,c.change)(u.REDUX_FORM_NAME,"estimateTime",(0,d.default)(e).startOf("day").diff((0,d.default)(t.startDate).startOf("day"),"days").toString())),r((0,c.change)(u.REDUX_FORM_NAME,"dueDate",(0,d.default)(e).toString()))}},source:"dueDate"})})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.NumberInput,{disabled:!0,validate:[(0,u.minValue)(0)],label:a("ra.tasks.fields.estimateTime"),source:"estimateTime"})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6,xs:12},l.default.createElement(u.FormDataConsumer,null,function(e){return"finish"===e.formData.status&&l.default.createElement(h.default,{label:a("ra.tasks.fields.finishDate"),source:"finishDate",addLabel:!0})})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6,xs:12},l.default.createElement(w.default,{storage:n+"files",label:a("ra.tasks.fields.attachedFiles"),source:"attachedFiles",translate:a,dataProvider:t})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:12},l.default.createElement(E.default,{label:a("ra.tasks.fields.description"),fullWidth:!0,source:"description"}))),n&&l.default.createElement(u.DisabledInput,{source:"projectKey",defaultValue:n,style:{display:"none"}}))))}}]),t}();k.propTypes={dataProvider:i.default.func,translate:i.default.any,projectKey:i.default.string};var P=(0,s.compose)(v.default,u.translate);t.default=P(k)},8364:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(0),l=O(o),i=O(a(3)),s=a(48),u=a(34),c=a(54),d=O(a(979)),f=O(a(1403)),p=a(43),m=a(117),h=O(a(706)),y=O(a(86)),v=O(a(710)),b=O(a(707)),g=O(a(983)),E=O(a(996)),w=O(a(176));function O(e){return e&&e.__esModule?e:{default:e}}function _(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var P=function(e){function t(){var e,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];return a=r=k(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={statusChoices:[],typeChoices:[],priorityChoices:[]},r.nowDate=function(){var e=Date.now();return new Date(e).toISOString()},k(r,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),n(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dataProvider,r=t.translate;a(m.CUSTOM,"Tasks",{subUrl:"getAllEnum"}).then(function(t){var a=t.data,n=a.priority,o=a.status,l=a.type,i={statusChoices:o.map(function(e){return{id:e,name:r("ra.tasks.statuses."+e)}}),typeChoices:l.map(function(e){return{id:e,name:r("ra.tasks.types."+e)}}),priorityChoices:n.map(function(e){return{id:e,name:r("ra.tasks.priorities."+e)}})};e.setState(i)})}},{key:"render",value:function(){var e=this.props,t=e.dataProvider,a=e.translate,n=e.projectKey,o=_(e,["dataProvider","translate","projectKey"]);return l.default.createElement(f.default,r({title:"ra.action.create"},o),l.default.createElement(v.default,{redirect:"list"},l.default.createElement(b.default,null,l.default.createElement(p.Grid,{middle:!0,container:!0,spacing:2},l.default.createElement(p.Grid,{middle:!0,item:!0,sm:12},l.default.createElement(u.LongTextInput,{label:a("ra.tasks.fields.name"),source:"name",validate:(0,u.required)()})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.SelectInput,{label:a("ra.tasks.fields.status"),validate:(0,u.required)(),source:"status",choices:this.state.statusChoices})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.SelectInput,{label:a("ra.tasks.fields.type"),source:"type",choices:this.state.typeChoices})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.SelectInput,{label:a("ra.tasks.fields.priority"),validate:(0,u.required)(),source:"priority",choices:this.state.priorityChoices})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.ReferenceInput,{resource:"Tasks",label:a("ra.tasks.fields.assigneeId"),validate:(0,u.required)(),source:"assigneeId",reference:"appusers"},l.default.createElement(u.SelectInput,{optionText:"fullName"}))),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.FormDataConsumer,null,function(e){var t=e.formData,r=e.dispatch;return l.default.createElement(d.default,{label:a("ra.tasks.fields.startDate"),options:{defaultValue:new Date},inputProps:{onChange:function(e){r((0,c.change)(u.REDUX_FORM_NAME,"estimateTime",(0,w.default)(t.dueDate).diff((0,w.default)(e),"days").toString())),r((0,c.change)(u.REDUX_FORM_NAME,"startDate",(0,w.default)(e).toString()))}},source:"startDate"})})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.FormDataConsumer,null,function(e){var t=e.formData,r=e.dispatch;return l.default.createElement(d.default,{label:a("ra.tasks.fields.dueDate"),inputProps:{onChange:function(e){r((0,c.change)(u.REDUX_FORM_NAME,"estimateTime",(0,w.default)(e).startOf("day").diff((0,w.default)(t.startDate).startOf("day"),"days").toString())),r((0,c.change)(u.REDUX_FORM_NAME,"dueDate",(0,w.default)(e).toString()))}},source:"dueDate"})})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6},l.default.createElement(u.NumberInput,{disabled:!0,defaultValue:0,validate:[(0,u.minValue)(0)],label:a("ra.tasks.fields.estimateTime"),source:"estimateTime"})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6,xs:12},l.default.createElement(u.FormDataConsumer,null,function(e){var t=e.formData,n=_(e,["formData"]);return"finish"===t.status&&l.default.createElement(h.default,r({label:a("ra.tasks.fields.finishDate"),source:"finishDate",addLabel:!0},n))})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:6,xs:12},l.default.createElement(E.default,{storage:n+"files",label:a("ra.tasks.fields.attachedFiles"),source:"attachedFiles",translate:a,dataProvider:t})),l.default.createElement(p.Grid,{middle:!0,item:!0,sm:12},l.default.createElement(g.default,{label:a("ra.tasks.fields.description"),fullWidth:!0,source:"description"}))),n&&l.default.createElement(u.DisabledInput,{source:"projectKey",defaultValue:n,style:{display:"none"}}))))}}]),t}();P.propTypes={dataProvider:i.default.func,translate:i.default.any,projectKey:i.default.string};var j=(0,s.compose)(y.default,u.translate);t.default=j(P)}}]);