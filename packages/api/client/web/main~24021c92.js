(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{8042:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),l=y(a),u=y(n(176)),i=n(48),c=y(n(20));n(278);var s=y(n(3)),f=n(731),p=y(n(712)),d=y(n(211)),m=y(n(153));function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}n(714);var b=function(e){var t=e.value,n=e.className,r=h(e,["value","className"]);return l.default.createElement(f.MuiPickersUtilsProvider,{utils:p.default,locale:r.locale,moment:u.default},l.default.createElement(f.DateTimePicker,o({value:t||null,format:"L LT",clearable:!0},r,{className:(0,c.default)("date-input-fix",n),animateYearScrolling:!1})))};b.propTypes={locale:s.default.string,value:s.default.any,className:s.default.string};var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PureComponent),r(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.inputProps,r=e.className,a=e.label,u=h(e,["options","inputProps","className","label"]),i=o({},t,{InputLabelProps:{shrink:!0},InputProps:{inputComponent:b,completeUI:!0}}),s=o({},n);return l.default.createElement(m.default,o({label:a},u,{className:(0,c.default)(r),inputProps:s,options:i}))}}]),t}();v.propTypes={inputProps:s.default.object,options:s.default.object,className:s.default.string,classes:s.default.object,label:s.default.string},t.default=(0,i.compose)(d.default)(v)},8044:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),i=y(u),c=y(n(3)),s=n(48),f=n(106),p=n(34),d=y(n(86)),m=n(1592);function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=(o=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={choices:[]},r.renderChoises=function(e,t,n){var o=r.props,a=o.exCludeId,l=o.record,u=void 0===l?{}:l,i=o.flgAllLevel1,c=[];return t&&c.push({id:"",name:""}),n&&c.push({id:"AllDma",name:"generic.allDma"}),i&&c.push({id:"AllDma",name:"generic.allDmaLevel1"}),e.length>0&&e.map(function(e){if(e.id!==a&&e.id!==u.id)if(e.parentDmaId){var t=(0,f.findLastIndex)(c,function(t){return t.id===e.parentDmaId||t.parentDmaId===e.parentDmaId});e.name=(0,m.addSpaceByLevel)(e)+e.name,c.splice(t+1,0,e)}else c.push(e)}),c},r.handleChange=function(e,t,n){for(var o={},a=r.state.choices,l=r.props.onChange,u=0;u<a.length;u++)if(a[u]&&a[u].id===t){o=a[u];break}l&&l(e,t,n,o)},h(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.dataProvider,r=t.maxLevel,o=t.allowEmpty,a=t.alldma,l=this;n(p.GET_LIST,"dmas",{rawFilter:{where:{level:{lte:r}},fields:{id:!0,level:!0,name:!0,parentDmaId:!0,center:!0},order:["level ASC","name ASC"]}}).then(function(t){t&&t.data&&t.data.length>0&&e.setState({choices:l.renderChoises(t.data,o,a)})})}},{key:"render",value:function(){var e=this.props,t=(e.dataProvider,e.onChange,e.exCludeId,e.maxLevel,e.allowEmpty,e.alldma,e.flgAllLevel1,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["dataProvider","onChange","exCludeId","maxLevel","allowEmpty","alldma","flgAllLevel1"])),n=this.state.choices;return i.default.createElement(p.SelectInput,a({onChange:this.handleChange},t,{choices:n,translateChoice:!0}))}}]),t}(),r.propTypes={dataProvider:c.default.func,maxLevel:c.default.number,exCludeId:c.default.any,record:c.default.any,allowEmpty:c.default.bool,onChange:c.default.func,alldma:c.default.string,flgAllLevel1:c.default.bool},r.defaultProps={maxLevel:3,flgAllLevel1:!1},o),v=(0,s.compose)(d.default);t.default=v(b)},8056:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(0)),o=l(n(3)),a=n(54);function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.source;return r.default.createElement(a.Field,{name:t,component:"input",type:"hidden",placeholder:"latitude"})};u.propTypes={source:o.default.string},t.default=u},8059:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),i=y(u),c=y(n(3)),s=n(42),f=n(412),p=y(n(86)),d=n(1617),m=y(n(1618));function y(e){return e&&e.__esModule?e:{default:e}}var h={commonConfig:d.commonConfig},b=(r=(0,s.connect)(function(e){return{config:e.common}},h),(0,p.default)(o=r(o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=function(e){var t=e.latLng,r={lat:t.lat(),lng:t.lng()};n.props.getPositionClick(r)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.defaultCenter,n=e.defaultZoom,r=e.position,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["defaultCenter","defaultZoom","position"]);return i.default.createElement(m.default,a({configModel:"ctmConfigs",onClick:this.onClick,defaultCenter:t,defaultZoom:n},o),r&&i.default.createElement(f.Marker,{position:r,zIndex:210}))}}]),t}())||o)||o);b.propTypes={dataProvider:c.default.func,commonConfig:c.default.func,centerPointGeo:c.default.object,zoomLevel:c.default.number,getPositionClick:c.default.func,defaultZoom:c.default.number,defaultCenter:c.default.any,position:c.default.object},t.default=b},8134:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=h(a),u=h(n(3)),i=h(n(20)),c=n(48),s=n(106),f=n(26),p=n(34),d=h(n(86)),m=h(n(8135)),y=h(n(153));function h(e){return e&&e.__esModule?e:{default:e}}function b(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateCenter=function(e){n.setState({center:e})},n.state={defaultCenter:e.center,center:e.center||void 0,children:u.default.node},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.options,o=t.value,a=t.className,u=t.classes,c=t.dataProvider,f=t.theme,d=t.defaultCenter,h=t.defaultZoom,v=t.enableSearchGadm,g=t.enableSearchDma,P=t.formRef,w=t.enableCropPolygons,O=t.enableDeletePolygons,_=t.enableDrawManyPolygons,j=t.children,C=b(t,["options","value","className","classes","dataProvider","theme","defaultCenter","defaultZoom","enableSearchGadm","enableSearchDma","formRef","enableCropPolygons","enableDeletePolygons","enableDrawManyPolygons","children"]);return l.default.createElement(p.FormDataConsumer,null,function(t){var p=t.formData,E=b(t,["formData"]),x=r({},n,{InputProps:{inputComponent:m.default},inputProps:{mapitemprops:{polygon:{options:f.dma.edit},options:{maxHeight:"500px"}},decorate:{dataProvider:c,parentDmaId:(0,s.get)(p,"parentDmaId",""),excludeId:(0,s.get)(p,"id",""),inCludeChild:!0},children:j,center:e.state.center,defaultCenter:d,defaultZoom:h,enableSearchGadm:v,enableSearchDma:g,formRef:P,enableCropPolygons:w,enableDeletePolygons:O,enableDrawManyPolygons:_},InputLabelProps:{shrink:!0}});return l.default.createElement(y.default,r({},C,E,{options:x,className:(0,i.default)(a,u.input),value:o||[]}))})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.center&&!(0,s.isEqual)(e.center,t.defaultCenter)?r({},t,{defaultCenter:e.center,center:e.center}):t}}]),t}();v.propTypes={defaultCenter:u.default.object,defaultZoom:u.default.number,center:u.default.object,options:u.default.object,value:u.default.any,className:u.default.any,classes:u.default.object,theme:u.default.object,dataProvider:u.default.func,enableSearchGadm:u.default.bool,enableSearchDma:u.default.bool,formRef:u.default.object,enableCropPolygons:u.default.bool,enableDeletePolygons:u.default.bool,enableDrawManyPolygons:u.default.bool,children:u.default.node};var g=(0,c.compose)((0,f.withStyles)(function(){return{input:{width:"100%"}}}),d.default,f.withTheme);t.default=g(v)},8145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=h(a),u=h(n(3)),i=h(n(20)),c=n(48),s=n(26),f=n(34),p=h(n(86)),d=h(n(8146)),m=h(n(153)),y=h(n(17));function h(e){return e&&e.__esModule?e:{default:e}}function b(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,o=e.className,a=e.classes,u=e.dataProvider,c=e.theme,s=e.enableCropPolygons,p=e.enableDeletePolygons,h=e.formRef,v=e.onlyShow,g=b(e,["options","value","className","classes","dataProvider","theme","enableCropPolygons","enableDeletePolygons","formRef","onlyShow"]);return l.default.createElement(f.FormDataConsumer,null,function(e){var f=e.formData,P=b(e,["formData"]),w=r({},t,{InputProps:{inputComponent:d.default},inputProps:{mapitemprops:{polygon:{options:c.dma.edit},options:{maxHeight:"500px"}},decorate:{dataProvider:u,parentDmaId:(0,y.default)(f,"parentDmaId"),excludeId:(0,y.default)(f,"id"),inCludeChild:!0,mapitemprops:{polygon:{options:c.sourceGroup},options:{maxHeight:"500px"}}},formRef:h,enableCropPolygons:s,enableDeletePolygons:p,onlyShow:v},InputLabelProps:{shrink:!0}});return l.default.createElement(m.default,r({},g,P,{options:w,className:(0,i.default)(o,a.input),value:n||[]}))})}}]),t}();v.propTypes={options:u.default.object,value:u.default.any,className:u.default.any,classes:u.default.object,theme:u.default.object,dataProvider:u.default.func,enableCropPolygons:u.default.bool,enableDeletePolygons:u.default.bool,formRef:u.default.object,onlyShow:u.default.bool};var g=(0,c.compose)((0,s.withStyles)(function(){return{input:{width:"100%"}}}),p.default,s.withTheme);t.default=g(v)},8148:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=h(a),u=h(n(3)),i=h(n(20)),c=n(48),s=n(26),f=n(34),p=h(n(86)),d=h(n(8149)),m=h(n(153)),y=h(n(17));function h(e){return e&&e.__esModule?e:{default:e}}function b(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateCenter=function(e){n.setState({center:e})},n.state={zoom:e.zoom||void 0,center:e.center||void 0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.options,o=t.value,a=t.defaultZoom,u=t.defaultCenter,c=t.className,s=t.classes,p=t.dataProvider,h=t.icon,v=t.theme,g=t.children,P=b(t,["options","value","defaultZoom","defaultCenter","className","classes","dataProvider","icon","theme","children"]);return l.default.createElement(f.FormDataConsumer,null,function(t){var f=t.formData,w=b(t,["formData"]),O=r({},n,{InputProps:{inputComponent:d.default},inputProps:{mapitemprops:{marker:{options:v.node.edit},options:{maxHeight:"500px"},icon:h},decorate:{dataProvider:p},center:e.state.center||(0,y.default)(f,"position"),defaultZoom:a,defaultCenter:u,formData:f,dataProvider:p,children:g},InputLabelProps:{shrink:!0}});return l.default.createElement(m.default,r({},P,w,{options:O,className:(0,i.default)(c,s.input),value:o||[]}))})}}]),t}();v.propTypes={defaultCenter:u.default.object,defaultZoom:u.default.number,zoom:u.default.number,center:u.default.object,icon:u.default.any,options:u.default.object,value:u.default.any,className:u.default.any,classes:u.default.object,theme:u.default.object,dataProvider:u.default.func,children:u.default.node};var g=(0,c.compose)((0,s.withStyles)(function(){return{input:{width:"100%"}}}),p.default,s.withTheme);t.default=g(v)},8151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=h(a),u=h(n(3)),i=h(n(20)),c=n(48),s=n(26),f=n(34),p=h(n(17)),d=h(n(86)),m=h(n(8152)),y=h(n(153));function h(e){return e&&e.__esModule?e:{default:e}}function b(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,o=e.className,a=e.classes,u=e.dataProvider,c=e.defaultZoom,s=e.defaultCenter,d=e.theme,h=e.icon,v=e.model,g=e.activeIcon,P=e.children,w=b(e,["options","value","className","classes","dataProvider","defaultZoom","defaultCenter","theme","icon","model","activeIcon","children"]);return l.default.createElement(f.FormDataConsumer,null,function(e){var f=e.formData,O=b(e,["formData"]),_=r({},t,{InputProps:{inputComponent:m.default},inputProps:{mapitemprops:{polyline:{options:d.pipe.edit},options:{maxHeight:"500px"}},icon:h,activeIcon:g,model:v,formData:f,dataProvider:u,decorate:{dataProvider:u,dmaId:(0,p.default)(f,"dmaId",""),currentPipeId:(0,p.default)(f,"id")},defaultZoom:c,defaultCenter:s,children:P},InputLabelProps:{shrink:!0}});return l.default.createElement(y.default,r({},w,O,{options:_,className:(0,i.default)(o,a.input),value:n||[]}))})}}]),t}();v.propTypes={model:u.default.string.isRequired,icon:u.default.any.isRequired,activeIcon:u.default.any,options:u.default.object,value:u.default.any,defaultZoom:u.default.number,defaultCenter:u.default.object,className:u.default.any,classes:u.default.object,theme:u.default.object,dataProvider:u.default.func,children:u.default.node};var g=(0,c.compose)((0,s.withStyles)(function(){return{input:{width:"100%"}}}),d.default,s.withTheme);t.default=g(v)},8157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=y(a),u=y(n(3)),i=y(n(20)),c=n(48),s=n(26),f=n(34),p=y(n(86)),d=y(n(8158)),m=y(n(153));function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,o=e.className,a=e.classes,u=e.dataProvider,c=e.defaultZoom,s=e.defaultCenter,p=e.theme,y=e.onFromNodeChange,b=e.onToNodeChange,v=e.hideNode,g=e.children,P=h(e,["options","value","className","classes","dataProvider","defaultZoom","defaultCenter","theme","onFromNodeChange","onToNodeChange","hideNode","children"]);return l.default.createElement(f.FormDataConsumer,null,function(e){var f=e.formData,w=h(e,["formData"]),O=r({},t,{InputProps:{inputComponent:d.default},inputProps:{mapitemprops:{polyline:{options:p.pipe.edit},options:{maxHeight:"500px"}},formData:f,onFromNodeChange:y,onToNodeChange:b,dataProvider:u,decorate:{dataProvider:u,dmaId:f.dmaId,currentPipeId:f.id},defaultZoom:c,defaultCenter:s,hideNode:v,children:g},InputLabelProps:{shrink:!0}});return l.default.createElement(m.default,r({},P,w,{options:O,className:(0,i.default)(o,a.input),value:n||[]}))})}}]),t}();b.propTypes={onFromNodeChange:u.default.func.isRequired,onToNodeChange:u.default.func.isRequired,options:u.default.object,value:u.default.any,defaultZoom:u.default.number,defaultCenter:u.default.object,className:u.default.any,classes:u.default.object,theme:u.default.object,dataProvider:u.default.func,hideNode:u.default.bool,children:u.default.node};var v=(0,c.compose)((0,s.withStyles)(function(){return{input:{width:"100%"}}}),p.default,s.withTheme);t.default=v(b)},8159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=y(a),u=y(n(3)),i=y(n(20)),c=n(48),s=n(26),f=n(34),p=y(n(86)),d=y(n(8160)),m=y(n(153));function y(e){return e&&e.__esModule?e:{default:e}}function h(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,o=e.className,a=e.classes,u=e.dataProvider,c=e.defaultZoom,s=e.defaultCenter,p=e.theme,y=e.onFromPositionChange,b=e.onToPositionChange,v=h(e,["options","value","className","classes","dataProvider","defaultZoom","defaultCenter","theme","onFromPositionChange","onToPositionChange"]);return l.default.createElement(f.FormDataConsumer,null,function(e){var f=e.formData,g=h(e,["formData"]),P=r({},t,{InputProps:{inputComponent:d.default},inputProps:{mapitemprops:{polyline:{options:p.pipe.edit},options:{maxHeight:"500px"}},formData:f,onFromPositionChange:y,onToPositionChange:b,dataProvider:u,decorate:{dataProvider:u},defaultZoom:c,defaultCenter:s},InputLabelProps:{shrink:!0}});return l.default.createElement(m.default,r({},v,g,{options:P,className:(0,i.default)(o,a.input),value:n||[]}))})}}]),t}();b.propTypes={onFromPositionChange:u.default.func,onToPositionChange:u.default.func,options:u.default.object,value:u.default.any,defaultZoom:u.default.number,defaultCenter:u.default.object,className:u.default.any,classes:u.default.object,theme:u.default.object,dataProvider:u.default.func};var v=(0,c.compose)((0,s.withStyles)(function(){return{input:{width:"100%"}}}),p.default,s.withTheme);t.default=v(b)},8161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),u=f(l),i=f(n(3)),c=n(85),s=f(n(8162));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=(o=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={creportSources:[],factories:[]},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),a(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dataProvider;t(c.CUSTOM,"creportsources",{}).then(function(t){t&&t.data&&t.data.length?e.setState({creportSources:t.data}):e.setState({creportSources:[]})}),t(c.CUSTOM,"factories",{}).then(function(t){t&&t.data&&t.data.length?e.setState({factories:t.data}):e.setState({factories:[]})})}},{key:"render",value:function(){var e=this.state,t=e.creportSources,n=e.factories;return u.default.createElement(l.Fragment,null,t.map(function(e){return u.default.createElement(s.default,{key:e.id,info:e,status:{name:"critical",speed:"0s",color:"white"},type:"creportSource"})}),n.map(function(e){return u.default.createElement(s.default,{key:e.id,info:e,status:{name:"normal",speed:"0s",color:"white"},type:"Factory"})}))}}]),t}(),r.propTypes={dataProvider:i.default.func},o);t.default=d},8179:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),i=f(u),c=f(n(3)),s=n(34);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=(o=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={choices:[]},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.choices,n=e.node,r=e.dma,o=e.allmat,a=e.factory,l=[];r&&l.push({id:"Dma",name:"generic.dma"}),n&&l.push({id:"Node",name:"generic.node"}),o&&l.push({id:"AllMat",name:"generic.allMat"}),a&&l.push({id:"Factory",name:"generic.factory"}),l=l.concat(t),this.setState({choices:l})}},{key:"render",value:function(){var e=this.props,t=(e.choices,e.node,e.dma,e.multi),n=(e.factory,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["choices","node","dma","multi","factory"]));return this.state.choices&&this.state.choices.length?t?i.default.createElement(s.SelectArrayInput,a({},n,{choices:this.state.choices,translateChoice:!0})):i.default.createElement(s.SelectInput,a({},n,{choices:this.state.choices,translateChoice:!0})):null}}]),t}(),r.propTypes={choices:c.default.arrayOf(c.default.object),dma:c.default.bool,node:c.default.bool,allmat:c.default.string,multi:c.default.bool,translate:c.default.func,factory:c.default.bool},r.defaultProps={choices:[{id:"Pipe",name:"resources.materialstocks.types.pipe"},{id:"FlowLogger",name:"resources.materialstocks.types.flowLogger"},{id:"ElectricLogger",name:"resources.materialstocks.types.electricLogger"},{id:"QualityLogger",name:"resources.materialstocks.types.qualityLogger"},{id:"Meter",name:"resources.materialstocks.types.meter"},{id:"Filter",name:"resources.materialstocks.types.filter"},{id:"PressureReducing",name:"resources.materialstocks.types.pressureReducing"},{id:"Pump",name:"resources.materialstocks.types.pump"},{id:"Tank",name:"resources.materialstocks.types.tank"},{id:"Valve",name:"resources.materialstocks.types.valve"},{id:"Other",name:"resources.materialstocks.types.other"}]},o);t.default=d},8195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=b(o),l=b(n(3)),u=n(48),i=n(43),c=n(26),s=n(34),f=b(n(17)),p=n(130),d=b(n(192)),m=n(117),y=b(n(1445)),h=b(n(86));function b(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var l=t[o](a),u=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var P=function(e){function t(){var e,n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={saving:!1},r.selectFile=function(e){var t=document.createElement("input");return t.setAttribute("type","file"),t.setAttribute("accept",e),t.click(),new Promise(function(e,n){t.onchange=function(t){t?e(t.path[0].files[0]):n("undefined")}})},r.fileToServer=function(){var e=v(regeneratorRuntime.mark(function e(t,n){var a,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.dataProvider(m.UPLOAD,n,{subUrl:"upload",files:[t],fullUrl:!0}).finally(function(){});case 2:if(a=e.sent,l=(0,f.default)(a,"data.result.files.files[0].name")){e.next=6;break}throw new Error("error.UPLOAD_FILE_ERROR");case 6:return e.abrupt("return",{name:l.substring(l.indexOf("/")+1),url:l});case 7:case"end":return e.stop()}},e,o)}));return function(t,n){return e.apply(this,arguments)}}(),r.checkTypeFile=function(e,t){var n=t.substring(t.lastIndexOf(".")+1);return!(!RegExp(n,"gi").test(e&&e.toString())&&e)},r.addFile=function(){var e=v(regeneratorRuntime.mark(function e(t,n,a){var l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.selectFile();case 2:if(l=e.sent,!r.checkTypeFile(n,l.name)){e.next=11;break}return r.safeSetState({saving:!0}),e.next=8,r.fileToServer(l,a);case 8:return u=e.sent,r.safeSetState({saving:!1}),e.abrupt("return",t.push(u));case 11:case"end":return e.stop()}},e,o)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.onRemove=function(e,t){e.remove(t)},r.renderDetails=function(e){var t=e.fields,n=void 0===t?[]:t,o=r.props,l=o.classes,u=o.titleimage,c=o.dataProvider,s=o.filterFiles,f=o.accept,m=o.storage,h=o.disabled,b=r.state.saving;return a.default.createElement("ul",{className:l.attachFiles},a.default.createElement(i.Grid,{middle:"true",item:!0,sm:12,xs:6},n.map(function(e,t){var o=n.get(t);return a.default.createElement(i.Grid,{middle:"true",item:!0,sm:12,xs:12,key:t},a.default.createElement("li",{className:l.file,key:t},a.default.createElement(i.Grid,{middle:"true",item:!0,sm:10,xs:10},a.default.createElement("a",{className:l.pathFile},o.name)),!h&&a.default.createElement(i.Grid,{middle:"true",item:!0,sm:2,xs:2},a.default.createElement(d.default,{className:l.removeFile,type:"button",title:"Remove",onClick:function(){return r.onRemove(n,t)}},a.default.createElement(p.Delete,null)))),a.default.createElement(i.Grid,{middle:"true",item:!0,sm:12,xs:12},a.default.createElement(y.default,{key:t,source:"images",className:l.preview,title:u,dataProvider:c,imageName:o.name,storage:m})))})),!h&&a.default.createElement(i.Grid,{middle:"true",item:!0,sm:12,xs:12},a.default.createElement("li",{style:{listStyleType:"none"}},a.default.createElement(d.default,{saving:b,"aria-label":"Attachment",type:"button",className:l.addFile,label:"generic.file",disabled:n.length>=1,onClick:function(){return r.addFile(n,s,m,f)}},a.default.createElement(p.Attachment,{style:{paddingRight:".5em"}})))))},r.safeSetState=function(e){r.unmount||r.setState(e)},g(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentWillUnmount",value:function(){this.unmount=!0}},{key:"compareImages",value:function(e,t){return!(e&&t&&e.length&&e.length===t.length)||e.reduce(function(e,t){return e.name+t.name},"")!==t.reduce(function(e,t){return e.name+t.name},"")}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.source,r=t.record,o=void 0===r?{}:r,a=(0,f.default)(o,n),l=(0,f.default)(e,"record."+n);return this.compareImages(a,l)}},{key:"render",value:function(){var e=this.props,t=(e.className,e.classes,e.dataProvider,e.translate,e.filterFiles,e.storage,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","classes","dataProvider","translate","filterFiles","storage"])),n=this.renderDetails;return a.default.createElement(s.ArrayInput,t,a.default.createElement(n,null))}}]),t}();P.propTypes={accept:l.default.any,className:l.default.any,classes:l.default.object,data:l.default.object,dataProvider:l.default.func,disabled:l.default.bool,field:l.default.string,filterFiles:l.default.array,id:l.default.string,record:l.default.any,resource:l.default.string,source:l.default.string,storage:l.default.string,titleimage:l.default.string,translate:l.default.any};var w=(0,u.compose)((0,c.withStyles)(function(){return{input:{width:"100%"},addFile:{margin:".5em",padding:"0 1em"},attachFiles:{margin:"1em 0",padding:"0",width:256},file:{margin:".5em 0",width:"100%",listStyleType:"none",display:"inline-flex",borderBottom:"1px solid rgba(0, 0, 0, 0.54)"},pathFile:{display:"inline-flex",padding:".5em 0",textDecoration:"none"},removeFile:{display:"inline-flex",float:"right",padding:".5em"}}}),h.default,c.withTheme);t.default=w(P)},979:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=d(a),u=d(n(20)),i=d(n(3)),c=n(48),s=d(n(211)),f=d(n(1452)),p=d(n(153));function d(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PureComponent),o(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.inputProps,o=e.className,a=e.label,i=e.disableFuture,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["options","inputProps","className","label","disableFuture"]),s=r({},t,{InputLabelProps:{shrink:!0},InputProps:{inputComponent:f.default,completeUI:!0}}),d=r({},n,{disableFuture:i});return l.default.createElement(p.default,r({label:a},c,{className:(0,u.default)(o),inputProps:d,options:s}))}}]),t}();m.propTypes={inputProps:i.default.object,options:i.default.object,className:i.default.string,classes:i.default.object,label:i.default.string,disableFuture:i.default.bool};var y=(0,c.compose)(s.default)(m);t.default=y},983:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=m(a),u=m(n(3)),i=m(n(20)),c=n(48),s=n(43),f=m(n(211)),p=m(n(153)),d=m(n(1593));function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.renderInput=function(e){e.onBlur,e.onKeyDown,e.onKeyUp;var t=y(e,["onBlur","onKeyDown","onKeyUp"]);return l.default.createElement(d.default,t)},h(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.inputProps,o=e.className,a=e.classes,u=y(e,["options","inputProps","className","classes"]),c=r({},t,{InputProps:{inputComponent:this.renderInput},InputLabelProps:{shrink:!0}}),s=r({},n);return l.default.createElement(p.default,r({},u,{inputProps:s,options:c,className:(0,i.default)(o,a.input)}))}}]),t}();b.propTypes={options:u.default.object,inputProps:u.default.object,className:u.default.any,classes:u.default.object};var v=(0,c.compose)(f.default,(0,s.withStyles)(function(){return{input:{width:"100%"}}}),s.withTheme);t.default=v(b)},996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=y(o),l=y(n(3)),u=n(48),i=n(43),c=n(26),s=n(34),f=y(n(192)),p=n(130),d=y(n(17)),m=n(117);function y(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,a){try{var l=t[o](a),u=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){var e,n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={urls:[],saving:!1},r.selectFile=function(){var e=document.createElement("input");return e.setAttribute("type","file"),e.click(),new Promise(function(t,n){e.onchange=function(e){e?t(e.path[0].files[0]):n("undefined")}})},r.fileToServer=function(){var e=h(regeneratorRuntime.mark(function e(t,n){var a,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.dataProvider(m.UPLOAD,n,{subUrl:"upload",files:[t],fullUrl:!0}).finally(function(){});case 2:if(a=e.sent,l=(0,d.default)(a,"data.result.files.files[0].name")){e.next=6;break}throw new Error("error.UPLOAD_FILE_ERROR");case 6:return e.abrupt("return","/api/"+n+"/download"+l.substring(l.indexOf("/")));case 7:case"end":return e.stop()}},e,o)}));return function(t,n){return e.apply(this,arguments)}}(),r.checkTypeFile=function(e,t){var n=t.substring(t.lastIndexOf(".")+1);return!(!RegExp(n,"gi").test(e&&e.toString())&&e)},r.getPathFileFromAWS=function(){var e=h(regeneratorRuntime.mark(function e(t){var n,a,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.props.storage,a=t.substring(t.lastIndexOf("/")+1),e.next=4,r.props.dataProvider(m.URL_ONLY,n,{subUrl:"download/"+a});case 4:(l=e.sent).data.url&&((u=r.state.urls).push(l.data.url),r.setState({urls:u}));case 6:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.addFile=function(){var e=h(regeneratorRuntime.mark(function e(t,n,a){var l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.selectFile();case 2:if(l=e.sent,!r.checkTypeFile(n,l.name)){e.next=13;break}return r.setState({saving:!0}),e.next=8,r.fileToServer(l,a);case 8:return u=e.sent,e.next=11,r.getPathFileFromAWS(u);case 11:return r.setState({saving:!1}),e.abrupt("return",t.push({name:l.name,url:u}));case 13:case"end":return e.stop()}},e,o)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.downloadFile=function(e){if(e){var t=r.props,n=t.dataProvider,o=t.storage,a=e.url.split(/(\\|\/)/g).pop();return n(m.CUSTOM,o,{stream:!0,method:"get",subUrl:"download/"+a,query:{f:e.name}})}},r.renderDetails=function(e){var t=e.fields,n=r.props,o=n.classes,l=n.translate,u=n.filterFiles,c=n.storage,s=n.max,d=r.state.saving;return a.default.createElement("ul",{className:o.attachFiles},a.default.createElement(i.Grid,{middle:"true",item:!0,sm:12,xs:12},t.map(function(e,n){var l=t.get(n);return a.default.createElement(i.Grid,{middle:"true",item:!0,sm:12,xs:12,key:n},a.default.createElement("li",{className:o.file,key:n},a.default.createElement("a",{className:o.pathFile},l.name),a.default.createElement(f.default,{className:o.removeFile,type:"button",title:"Remove",color:"secondary",onClick:function(){return t.remove(n)}},a.default.createElement(p.Delete,null)),a.default.createElement(f.default,{className:o.downloadFile,type:"button",title:"Download",onClick:function(){return r.downloadFile(l)}},a.default.createElement(p.CloudDownload,null))))})),s>t.length&&a.default.createElement(i.Grid,{middle:"true",item:!0,sm:12,xs:12},a.default.createElement("li",{style:{listStyleType:"none"}},a.default.createElement(f.default,{saving:d,variant:"contained",color:"primary","aria-label":"Attachment",type:"button",className:o.addFile,label:l("generic.file")||"File",onClick:function(){return r.addFile(t,u,c)}},a.default.createElement(p.Attachment,{style:{paddingRight:".5em"}})))))},b(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"render",value:function(){var e=this.props,t=(e.className,e.classes,e.dataProvider,e.translate,e.filterFiles,e.storage,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","classes","dataProvider","translate","filterFiles","storage"])),n=this.renderDetails;return a.default.createElement(s.ArrayInput,t,a.default.createElement(n,null))}}]),t}();v.propTypes={className:l.default.any,classes:l.default.object,dataProvider:l.default.func,resource:l.default.string,id:l.default.string,field:l.default.string,translate:l.default.any,filterFiles:l.default.array,storage:l.default.string,max:l.default.number},v.defaultProps={max:10};var g=(0,u.compose)((0,c.withStyles)(function(){return{input:{width:"100%"},addFile:{margin:".5em",padding:"0 1em"},attachFiles:{margin:"1em 0",padding:"0"},file:{margin:".5em 0",width:"100%",listStyleType:"none",display:"inline-block",borderBottom:"1px solid rgba(0, 0, 0, 0.54)"},pathFile:{display:"inline-flex",padding:".5em 0",textDecoration:"none"},removeFile:{float:"right"},downloadFile:{marginRight:"1em !important",float:"right"}}}),c.withTheme);t.default=g(v)}}]);