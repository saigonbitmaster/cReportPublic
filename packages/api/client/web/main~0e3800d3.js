(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=p(o),u=p(n(176)),i=p(n(20));n(278);var s=p(n(3)),c=n(731),f=p(n(712));function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.className,a=e.format,o=(e.date,e.onChange),s=e.fixUI,p=e.disableFuture,d=e.maxDate,h=(e.children,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value","className","format","date","onChange","fixUI","disableFuture","maxDate","children"])),y="string"==typeof t?(0,u.default)(t,t.length<=10?a:void 0):t;return l.default.createElement(c.MuiPickersUtilsProvider,{libInstance:u.default,utils:f.default,locale:h.locale},l.default.createElement("div",{style:{width:"100%",height:!1!==s?10:0}}),l.default.createElement(c.DatePicker,r({value:y||null,format:a,clearable:!0,disableFuture:p,maxDate:d},h,{onChange:function(e){return o(e?"string"==typeof e?(0,u.default)(e,a):e.toDate():e)},className:(0,i.default)("date-input-fix",n),animateYearScrolling:!1})))}}]),t}();d.propTypes={locale:s.default.string,value:s.default.any,className:s.default.string,format:s.default.string,date:s.default.bool,onChange:s.default.func,fixUI:s.default.any,disableFuture:s.default.any,maxDate:s.default.any,children:s.default.any},d.defaultProps={format:"L"},t.default=d},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=f(o),u=f(n(3)),i=n(34),s=f(n(174)),c=f(n(1586));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleBlur=function(e){r.props.onBlur(e),r.props.input.onBlur(e)},r.handleFocus=function(e){r.props.onFocus(e),r.props.input.onFocus(e)},r.handleChange=function(e){r.props.onChange(e),r.props.input.onChange(e)},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.input,a=e.isRequired,o=e.label,u=e.meta,f=e.options,p=e.resource,d=e.source,h=e.type,y=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","input","isRequired","label","meta","options","resource","source","type"]);if(void 0===u)throw new Error("The TextInput component wasn't called within a redux-form <Field>. Did you decorate it and forget to add the addField prop to your component? See https://marmelab.com/react-admin/Inputs.html#writing-your-own-input-component for details.");var m=u.touched,v=u.error;return l.default.createElement(c.default,r({margin:"normal",type:h,label:l.default.createElement(i.FieldTitle,{label:o,source:d,resource:p,isRequired:a}),error:!(!m||!v),helperText:m&&v,className:t},f,(0,s.default)(y),n,{onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange}))}}]),t}();d.propTypes={className:u.default.string,input:u.default.object,isRequired:u.default.bool,label:u.default.string,meta:u.default.object,name:u.default.string,onBlur:u.default.func,onChange:u.default.func,onFocus:u.default.func,options:u.default.object,resource:u.default.string,source:u.default.string,type:u.default.string},d.defaultProps={onBlur:function(){},onChange:function(){},onFocus:function(){},options:{}},t.default=(0,i.addField)(d)},1593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=p(a),l=p(n(3)),u=p(n(8045)),i=n(106),s=n(48),c=p(n(86)),f=n(117);function p(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var l=t[a](o),u=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(8054);var y={width:"100%"},m=function(e){function t(){var e,n,r,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return n=r=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.modules={toolbar:{container:[[{header:[1,2,!1]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:[!1,"large","huge"]}],["link","image"],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]],handlers:{image:function(){return r.handlerImage()}}}},r.formats=["header","bold","italic","underline","strike","blockquote","code-block","list","bullet","script","super","indent","direction","size","link","image","color","background","font","align"],r.handlerImage=d(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=r.reactQuillRef.getEditor(),r.insertImage(function(e){r.displayImage(t,e)});case 2:case"end":return e.stop()}},e,a)})),r.insertImage=function(e){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("name","file[]"),t.click(),t.onchange=d(regeneratorRuntime.mark(function n(){var o,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.files[0],!/^image\//.test(o.type)){n.next=6;break}return n.next=4,r.fileToServer(o);case 4:l=n.sent,e(l);case 6:case"end":return n.stop()}},n,a)}))},r.fileToServer=function(){var e=d(regeneratorRuntime.mark(function e(t){var n,o,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.dataProvider(f.URL_ONLY,"NmsFiles",{subUrl:"upload",fullUrl:!0});case 2:return n=e.sent,o=n.url,l=new FormData,e.next=7,l.append("file",t);case 7:return e.abrupt("return",new Promise(function(e,t){var n=new XMLHttpRequest;n.open("POST",o,!0),n.onload=function(){if(200===n.status){var r=JSON.parse(n.responseText).result.files.file;r[0].name?e("/api/nmsfiles/download"+r[0].name.substring(r[0].name.indexOf("/"))):t("Upload error!")}else t("Upload error!")},n.send(l)}));case 8:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),r.displayImage=function(e,t){var n=e.selection.lastRange.index||0;e.insertEmbed(n,"image",t)},r.handleChange=(0,i.debounce)(function(e){r.props.onChange(e)},300),h(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this;return o.default.createElement("div",{className:"text-editor",style:y},o.default.createElement(u.default,{ref:function(t){e.reactQuillRef=t},id:"quilleditor",theme:"snow",value:this.props.value,onChange:this.handleChange,modules:this.modules,formats:this.formats}))}}]),t}();m.defaultProps={value:""},m.propTypes={onChange:l.default.func.isRequired,value:l.default.string,locale:l.default.string,ref:l.default.func,dataProvider:l.default.func};var v=(0,s.compose)(c.default);t.default=v(m)},1623:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),i=y(u),s=y(n(3)),c=n(106),f=n(121),p=y(n(86)),d=y(n(721)),h=n(117);function y(e){return e&&e.__esModule?e:{default:e}}var m=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.excludeId,a=e.inCludeChild,o=e.parentDmaId;return n.state={excludeId:r,inCludeChild:a,parentDmaId:o,dmas:[],pipes:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"updateDma",value:function(){var e=this,t=this.props,n=t.dataProvider,r=t.parentDmaId,a=t.inCludeChild,o=t.excludeId,l=[];r?n(f.GET_ONE,"dmas",{id:r}).then(function(e){return e.data&&(l.push(e.data),a)?n(f.GET_LIST,"dmas",{rawFilter:{where:{parentDmaId:e.data.id,id:{neq:o}}}}):null}).then(function(t){t&&t.data&&(l=l.concat(t.data)),e.setState({parentDmaId:r,inCludeChild:a,excludeId:o,dmas:l})}):n(h.CUSTOM,"dmas",{filter:{where:{level:1,id:{neq:o}}}}).then(function(t){t&&t.data&&t.data.length>0&&(l=t.data),e.setState({parentDmaId:r,inCludeChild:a,excludeId:o,dmas:l})})}},{key:"updatePipe",value:function(){}},{key:"componentDidMount",value:function(){this.updateDma(),this.updatePipe()}},{key:"componentDidUpdate",value:function(e,t){t.excludeId===this.state.excludeId&&t.inCludeChild===this.state.inCludeChild&&t.parentDmaId===this.state.parentDmaId||this.updateDma()}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,c.isEqual)(this.state,t)}},{key:"render",value:function(){var e=this.state.dmas;return i.default.createElement(u.Fragment,null,i.default.createElement(d.default,{dmas:e,mapitemprops:{noFill:!0}}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.parentDmaId,r=e.inCludeChild,a=e.excludeId;return o({},t,{inCludeChild:r,excludeId:a,parentDmaId:n})}}]),t}(),r.propTypes={dataProvider:s.default.func.isRequired,excludeId:s.default.string,parentDmaId:s.default.string,inCludeChild:s.default.bool},r.defaultProps={excludeId:"",parentDmaId:"",inCludeChild:!1},a);t.default=(0,p.default)(m)},1626:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),i=y(u),s=y(n(3)),c=n(106),f=n(121),p=y(n(86)),d=y(n(721)),h=n(117);function y(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var v=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.dmaId,a=e.deep,o=e.currentPipeId;return n.state={dmaId:r,deep:a,currentPipeId:o,dmas:[],pipes:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"updateDma",value:function(){var e=this,t=this.props.dataProvider,n=this.props.dmaId,r=[];n?t(f.GET_ONE,"dmas",{id:n}).then(function(e){return e.data?(r.push(e.data),e.data.parentDmaId):null}).then(function(e){return e?t(f.GET_ONE,"dmas",{id:e}):null}).then(function(t){t&&t.data&&r.push(t.data),e.unmount||e.setState({dmaId:n,dmas:r})}):t(h.CUSTOM,"dmas",{filter:{where:{level:1}}}).then(function(t){t&&t.data&&t.data.length>0&&(r=t.data),e.unmount||e.setState({dmaId:n,dmas:r})})}},{key:"updatePipe",value:function(){}},{key:"componentDidMount",value:function(){this.updateDma(),this.updatePipe()}},{key:"componentDidUpdate",value:function(e,t){t.dmaId!==this.state.dmaId&&this.updateDma()}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,c.isEqual)(this.state,t)}},{key:"componentWillUnmount",value:function(){this.unmount=!0}},{key:"render",value:function(){var e=m(this.state,[]),t=this.props,n=(t.dmaId,t.deep,t.currentPipeId,t.mapitemprops),r=m(t,["dmaId","deep","currentPipeId","mapitemprops"]);return i.default.createElement(u.Fragment,null,i.default.createElement(d.default,o({},e,r,{mapitemprops:o({},n,{noFill:!0})})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.dmaId,r=e.deep,a=e.currentPipeId;return o({},t,{dmaId:n,deep:r,currentPipeId:a})}}]),t}(),r.propTypes={onMouseMove:s.default.func,mapitemprops:s.default.object,dataProvider:s.default.func.isRequired,dmaId:s.default.string,deep:s.default.number,currentPipeId:s.default.string},r.defaultProps={dmaId:"",deep:1,currentPipeId:""},a);t.default=(0,p.default)(v)},8057:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=h(o),u=h(n(3)),i=h(n(20)),s=n(48),c=n(26),f=h(n(211)),p=h(n(153)),d=h(n(8058));function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),u=0;u<a;u++)o[u]=arguments[u];return n=r=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.renderInput=function(e){e.onBlur,e.onKeyDown,e.onKeyUp;var t=y(e,["onBlur","onKeyDown","onKeyUp"]);return l.default.createElement(d.default,t)},m(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.inputProps,a=e.className,o=(e.classes,y(e,["options","inputProps","className","classes"])),u=r({},t,{InputProps:{inputComponent:this.renderInput,completeUI:!0},InputLabelProps:{shrink:!0}}),s=r({},n);return l.default.createElement(p.default,r({},o,{inputProps:s,options:u,className:(0,i.default)(a)}))}}]),t}();v.propTypes={options:u.default.object,inputProps:u.default.object,className:u.default.any,classes:u.default.object};var b=(0,s.compose)(f.default,c.withTheme);t.default=b(v)},8058:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=v(o),u=v(n(3)),i=n(48),s=n(43),c=v(n(300)),f=v(n(301)),p=v(n(302)),d=v(n(715)),h=n(34),y=n(106),m=v(n(8059));function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return n=a=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={open:!1,tempLocation:null},a.convertCoordinateToString=function(e){var t=a.props.roundPrecision,n="";return e&&("object"===(void 0===e?"undefined":r(e))&&e.lat&&e.lng?n=(0,y.round)(e.lat,t)+" - "+(0,y.round)(e.lng,t):"string"==typeof e&&(n=e)),n},a.convertStringToCoordinate=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.lat&&e.lng)return e;if("string"==typeof e){var t=e?e.split(" - "):"";if(Array.isArray(t)&&2===t.length)return{lat:Number(t[0]),lng:Number(t[1])}}return null},a.handleClickOpen=function(){a.setState({open:!0,tempLocation:a.props.value})},a.handleOK=function(){a.setState({open:!1}),a.props.onChange(a.state.tempLocation)},a.handleCancel=function(){a.setState({open:!1})},a.handleTempLocation=function(e){var t=a.convertStringToCoordinate(e.target.value);a.setState({tempLocation:t})},a.getPositionClick=function(e){var t=e.lat,n=e.lng,r=a.props.roundPrecision;a.setState({tempLocation:{lat:(0,y.round)(t,r),lng:(0,y.round)(n,r)}})},b(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.translate,r=e.defaultCenter,a=e.defaultZoom,u=this.state.tempLocation;return l.default.createElement(o.Fragment,null,l.default.createElement(s.Input,{id:"component-simple",onFocus:this.handleClickOpen,value:this.convertCoordinateToString(t),fullWidth:!0,placeholder:n("ra.map.specifyLocation")}),this.state.open&&l.default.createElement(c.default,{scroll:"body",open:!0,onClose:this.handleCancel,"aria-labelledby":"responsive-dialog-title"},l.default.createElement(d.default,{id:"alert-dialog-title"},n("ra.map.specifyLocation")),l.default.createElement(p.default,null,l.default.createElement(s.TextField,{id:"standard-name",label:n("ra.map.coordinate"),value:this.convertCoordinateToString(u),onChange:this.handleTempLocation,margin:"normal",fullWidth:!0}),l.default.createElement(m.default,{options:{height:"600px",width:"555px"},getPositionClick:this.getPositionClick,position:u,defaultZoom:a,defaultCenter:u||r})),l.default.createElement(f.default,null,l.default.createElement(s.Button,{onClick:this.handleCancel,color:"primary"},"Cancel"),l.default.createElement(s.Button,{onClick:this.handleOK,color:"primary",autoFocus:!0},"OK"))))}}]),t}();g.propTypes={translate:u.default.func,onChange:u.default.func,rest:u.default.any,value:u.default.any,defaultCenter:u.default.any,defaultZoom:u.default.number,roundPrecision:u.default.number},g.defaultProps={roundPrecision:6};var C=(0,i.compose)(h.translate);t.default=C(g)},8135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=f(o),u=f(n(3)),i=n(393),s=f(n(720)),c=f(n(1623));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={newPoints:null,typeCropPolygon:"",newCenter:""},r.clearPolygon=function(){r.setState({newPoints:[],newCenter:""});var e=r.props,t=e.name,n=e.formRef;n&&n.current.props.change(t,null)},r.getAreaPoint=function(e,t){var n="";t&&4===t.length?n={lat:(t[1]+t[3])/2,lng:(t[0]+t[2])/2}:e&&e.length&&(n=e[0]);r.setState({newPoints:e,newCenter:n});var a=r.props,o=a.name,l=a.formRef;l&&l.current.props.change(o,e)},r.handleUnion=function(){r.setState({typeCropPolygon:"union"})},r.handleSubtract=function(){r.setState({typeCropPolygon:"difference"})},r.handleDrawMany=function(){r.setState({typeCropPolygon:"many"})},r.onPolygonSecondComplete=function(e){var t=r.props,n=t.name,a=t.formRef;a&&a.current.props.change(n,e),r.setState({typeCropPolygon:"",newPoints:e})},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.enableSearchGadm,n=e.enableSearchDma,a=e.enableCropPolygons,o=e.enableDeletePolygons,u=e.enableDrawManyPolygons,f=e.defaultCenter,p=e.defaultZoom,d=e.value,h=void 0===d?[]:d,y=e.center,m=e.onChange,v=e.mapitemprops,b=void 0===v?{}:v,g=e.decorate,C=e.children,w={};y&&(w.center=y);var P=this.state,O=P.typeCropPolygon,_=P.newPoints,j=P.newCenter;return l.default.createElement(i.MapRender,r({defaultZoom:p,defaultCenter:f,center:j},w,{key:"map",options:{maxHeight:"400px"},enableSearchGadm:t,enableSearchDma:n,clearPolygon:this.clearPolygon,enableCropPolygons:a,getAreaPoint:this.getAreaPoint,handleUnion:this.handleUnion,handleSubtract:this.handleSubtract,handleDrawMany:this.handleDrawMany,enableDeletePolygons:o,enableDrawManyPolygons:u}),C&&C,l.default.createElement(s.default,{editable:!0,path:h||_,onChange:m,mapitemprops:b,enableCropPolygons:a,typeCropPolygon:O,onPolygonSecondComplete:this.onPolygonSecondComplete}),l.default.createElement(c.default,g))}}]),t}();d.propTypes={defaultCenter:u.default.object,defaultZoom:u.default.number,center:u.default.object,value:u.default.any,onChange:u.default.func,mapitemprops:u.default.object,decorate:u.default.object,enableSearchGadm:u.default.bool,enableSearchDma:u.default.bool,formRef:u.default.object,enableCropPolygons:u.default.bool,name:u.default.string,enableDeletePolygons:u.default.bool,enableDrawManyPolygons:u.default.bool,children:u.default.node},t.default=d},8146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=c(a),l=c(n(3)),u=c(n(1618)),i=c(n(720)),s=c(n(8147));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={newPoints:null,typeCropPolygon:"",newCenter:""},r.onPolygonSecondComplete=function(e){var t=r.props,n=t.name,a=t.formRef;a&&a.current.props.change(n,e),r.setState({typeCropPolygon:"",newPoints:e})},r.clearPolygon=function(){r.setState({newPoints:[],newCenter:""});var e=r.props,t=e.name,n=e.formRef;n&&n.current.props.change(t,null)},r.handleUnion=function(){r.setState({typeCropPolygon:"union"})},r.handleSubtract=function(){r.setState({typeCropPolygon:"difference"})},r.getAreaPoint=function(e,t){var n="";t&&4===t.length?n={lat:(t[1]+t[3])/2,lng:(t[0]+t[2])/2}:e&&e.length&&(n=e[0]);r.setState({newPoints:e,newCenter:n});var a=r.props,o=a.name,l=a.formRef;l&&l.current.props.change(o,e)},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=void 0===t?[]:t,r=e.onChange,a=e.mapitemprops,l=void 0===a?{}:a,c=e.decorate,f=e.name,p=e.formRef,d=e.enableCropPolygons,h=e.enableDeletePolygons,y=e.onlyShow,m=this.state,v=m.typeCropPolygon,b=m.newPoints,g=m.newCenter,C=void 0;return C=n&&n[0]?n[0]:g,o.default.createElement(u.default,{configModel:"srcConfigs",center:C,options:{maxHeight:"400px"},enableCropPolygons:d,enableDeletePolygons:h,name:f,formRef:p,clearPolygon:this.clearPolygon,handleUnion:this.handleUnion,handleSubtract:this.handleSubtract},o.default.createElement(i.default,{editable:!0,path:n||b,onChange:r,mapitemprops:l,enableCropPolygons:d,typeCropPolygon:v,onPolygonSecondComplete:this.onPolygonSecondComplete,onlyShow:y}),o.default.createElement(s.default,c))}}]),t}();p.propTypes={value:l.default.any,onChange:l.default.func,mapitemprops:l.default.object,decorate:l.default.object,formRef:l.default.object,enableCropPolygons:l.default.bool,name:l.default.string,enableDeletePolygons:l.default.bool,onlyShow:l.default.bool},t.default=p},8147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),i=y(u),s=y(n(3)),c=n(106),f=n(121),p=y(n(86)),d=y(n(721)),h=n(117);function y(e){return e&&e.__esModule?e:{default:e}}var m=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.safeSetState=function(e){n.unmount||n.setState(e)};var r=e.excludeId,a=e.inCludeChild,o=e.parentDmaId;return n.state={excludeId:r,inCludeChild:a,parentDmaId:o,dmas:[],pipes:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),l(t,[{key:"updateDma",value:function(){var e=this,t=this.props,n=t.dataProvider,r=t.parentDmaId,a=t.inCludeChild,o=t.excludeId,l=[];r?n(f.GET_ONE,"creportsourcegroups",{id:r}).then(function(e){return e.data&&(l.push(e.data),a)?n(f.GET_LIST,"creportsourcegroups",{rawFilter:{where:{parentDmaId:e.data.id,id:{neq:o}}}}):null}).then(function(t){t&&t.data&&(l=l.concat(t.data)),e.safeSetState({parentDmaId:r,inCludeChild:a,excludeId:o,dmas:l})}):n(h.CUSTOM,"creportsourcegroups",{filter:{where:{id:{neq:o}}}}).then(function(t){t&&t.data&&t.data.length>0&&(l=t.data),e.safeSetState({parentDmaId:r,inCludeChild:a,excludeId:o,dmas:l})})}},{key:"updatePipe",value:function(){}},{key:"componentDidMount",value:function(){this.updateDma(),this.updatePipe()}},{key:"componentWillUnmount",value:function(){this.unmount=!0}},{key:"componentDidUpdate",value:function(e,t){t.excludeId===this.state.excludeId&&t.inCludeChild===this.state.inCludeChild&&t.parentDmaId===this.state.parentDmaId||this.updateDma()}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,c.isEqual)(this.state,t)}},{key:"render",value:function(){var e=this.props.mapitemprops,t=this.state.dmas;return i.default.createElement(u.Fragment,null,i.default.createElement(d.default,{dmas:t,mapitemprops:o({},e,{noFill:!0})}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.parentDmaId,r=e.inCludeChild,a=e.excludeId;return o({},t,{inCludeChild:r,excludeId:a,parentDmaId:n})}}]),t}(),r.propTypes={dataProvider:s.default.func.isRequired,excludeId:s.default.string,parentDmaId:s.default.string,inCludeChild:s.default.bool},r.defaultProps={excludeId:"",parentDmaId:"",inCludeChild:!1},a);m.propTypes={mapitemprops:s.default.object},t.default=(0,p.default)(m)},8149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=p(a),l=p(n(3)),u=n(106),i=n(393),s=p(n(990)),c=p(n(991)),f=p(n(1623));function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMapClick=function(e){if(!n.props.value){var t={lat:e.latLng.lat(),lng:e.latLng.lng()};n.props.onChange(t)}},n.onMapCenterChanged=(0,u.debounce)(function(){var e=n.refMap.current.getCenter();e={lat:e.lat(),lng:e.lng()},n.setState({center:e})},100),n.state={center:e.center||e.defaultCenter},n.refMap=o.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.zoom,n=e.value,r=e.onChange,a=e.mapitemprops,l=void 0===a?{}:a,p=e.formData,d=e.dataProvider,h=e.center,y=e.defaultCenter,m=e.decorate,v=e.children;return o.default.createElement(i.MapRender,{refMap:this.refMap,onClick:this.onMapClick,zoom:t||12,options:{maxHeight:"450px"},defaultCenter:h||y,onCenterChanged:this.onMapCenterChanged},v,o.default.createElement(s.default,{editable:!0,position:n,onChange:r,mapitemprops:l}),o.default.createElement(c.default,{dataProvider:d,excludeId:(0,u.get)(p,"id"),center:this.state.center}),o.default.createElement(f.default,m))}}]),t}();d.propTypes={formData:l.default.object,dataProvider:l.default.func,center:l.default.object,defaultCenter:l.default.object,zoom:l.default.number,value:l.default.any,onChange:l.default.func,mapitemprops:l.default.object,decorate:l.default.object,children:l.default.node},t.default=d},8152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=y(o),u=y(n(3)),i=n(106),s=y(n(722)),c=n(393),f=y(n(1625)),p=n(8156),d=y(n(991)),h=y(n(1626));function y(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refMap=l.default.createRef(),n.onMapCenterChanged=(0,i.debounce)(function(){var e=n.refMap.current.getCenter();e={lat:e.lat(),lng:e.lng()},s.default.getDistance({latitude:n.state.center.lat,longitude:n.state.center.lng},{latitude:e.lat,longitude:e.lng})>n.props.reloadCenterDistance&&n.setState({center:e})},100),n.onNodeClick=function(e,t){n.props.onChange(t.id,t)},n.state={drawing:!e.value||0==e.value.length,center:e.center||e.defaultCenter,mousePosition:null,materials:[],decorateDmaId:e.decorate.dmaId,icon:e.icon,activeIcon:e.activeIcon},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.dataProvider,r=t.model;r&&(0,p.getList)({dataProvider:n,dmaIds:["all"],types:[r]}).then(function(t){e.unmount||e.setState({materials:t})})}},{key:"shouldComponentUpdate",value:function(e,t){return!(e.value===this.props.value&&(0,i.isEqual)(t.center,this.state.center)&&(0,i.isEqual)(t.materials,this.state.materials)&&(0,i.isEqual)(t.decorateDmaId,this.state.decorateDmaId)&&(0,i.isEqual)(t.icon,this.state.icon)&&(0,i.isEqual)(t.activeIcon,this.state.activeIcon))}},{key:"componentWillUnmount",value:function(){this.unmount=!0,this.onMapCenterChanged.cancel()}},{key:"render",value:function(){var e=this.props,t=e.defaultCenter,n=e.defaultZoom,r=e.value,a=void 0===r?null:r,u=e.formData,s=e.icon,p=e.activeIcon,y=e.decorate,m=e.dataProvider,v=e.model,b=e.children,g=this.state.materials;return l.default.createElement(o.Fragment,null,l.default.createElement(c.MapRender,{refMap:this.refMap,onCenterChanged:this.onMapCenterChanged,onMouseMove:this.onMouseMove,defaultZoom:n,defaultCenter:(0,i.get)(u,"node")||t,options:{maxHeight:"450px"}},b,l.default.createElement(d.default,{dataProvider:m,onClick:this.onNodeClick,center:this.state.center}),g.map(function(e){return e.id!==(0,i.get)(u,"id")?l.default.createElement(f.default,{key:e.id,data:e,icon:s,dataProvider:m,model:v}):null}),l.default.createElement(f.default,{id:a,icon:p||s,dataProvider:m,model:v}),l.default.createElement(h.default,y)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=!e.value||0==e.value.length,a=e.decorate.dmaId,o=(0,i.get)(e,"icon",""),l=(0,i.get)(e,"activeIcon","");return r({},t,{drawing:n,decorateDmaId:a,icon:o,activeIcon:l})}}]),t}();m.propTypes={center:u.default.object,model:u.default.string.isRequired,icon:u.default.any.isRequired,activeIcon:u.default.any,defaultCenter:u.default.object,defaultZoom:u.default.number,dataProvider:u.default.func,formData:u.default.object,value:u.default.any,onChange:u.default.func,mapitemprops:u.default.object,decorate:u.default.object,reloadCenterDistance:u.default.number,children:u.default.node},m.defaultProps={reloadCenterDistance:1e3},t.default=m},8158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=h(o),u=h(n(3)),i=n(106),s=h(n(722)),c=n(393),f=h(n(992)),p=h(n(991)),d=h(n(1626));function h(e){return e&&e.__esModule?e:{default:e}}function y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refMap=l.default.createRef(),n.onMapCenterChanged=(0,i.debounce)(function(){var e=n.refMap.current.getCenter();e={lat:e.lat(),lng:e.lng()},s.default.getDistance({latitude:n.state.center.lat,longitude:n.state.center.lng},{latitude:e.lat,longitude:e.lng})>n.props.reloadCenterDistance&&n.setState({center:e})},500),n.onNodeClick=function(e,t){var r=n.props,a=r.formData,o=r.onChange,l=r.value,u=r.onFromNodeChange,i=r.onToNodeChange;a.fromNodeId?a.toNodeId||(i(t.id),o([].concat(y(l),[t.position]))):(u(t.id),o([t.position]))},n.onMouseMove=function(e){var t=n.props.formData;if(t.fromNodeId&&!t.toNodeId){var r={lat:e.latLng.lat(),lng:e.latLng.lng()};n.setState({mousePosition:r})}},n.state={drawing:!e.value||0==e.value.length,center:e.defaultCenter,nodes:[],mousePosition:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"componentWillUnmount",value:function(){this.onMapCenterChanged.cancel()}},{key:"render",value:function(){var e=this.props,t=e.defaultCenter,n=e.defaultZoom,a=e.value,o=void 0===a?[]:a,u=e.formData,i=e.onChange,s=e.mapitemprops,h=void 0===s?{}:s,m=e.dataProvider,v=e.decorate,b=e.children,g=u.fromNodeId&&!u.toNodeId&&this.state.mousePosition?[].concat(y(o),[this.state.mousePosition]):o||[];return l.default.createElement(c.MapRender,{refMap:this.refMap,onCenterChanged:this.onMapCenterChanged,onMouseMove:this.onMouseMove,defaultZoom:n,defaultCenter:t,options:{maxHeight:"450px"}},b,l.default.createElement(f.default,{editable:!0,path:g,onChange:i,mapitemprops:h}),l.default.createElement(p.default,{dataProvider:m,onClick:this.onNodeClick,center:this.state.center}),l.default.createElement(d.default,r({},v,{onMouseMove:this.onMouseMove})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=!e.value||0==e.value.length;return r({},t,{drawing:n})}}]),t}();m.propTypes={defaultCenter:u.default.object,defaultZoom:u.default.number,dataProvider:u.default.func,onFromNodeChange:u.default.func.isRequired,onToNodeChange:u.default.func.isRequired,formData:u.default.object,value:u.default.any,onChange:u.default.func,mapitemprops:u.default.object,decorate:u.default.object,reloadCenterDistance:u.default.number,children:u.default.node},m.defaultProps={reloadCenterDistance:1e3},t.default=m},8160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=y(o),u=y(n(3)),i=n(106),s=y(n(722)),c=n(393),f=y(n(992)),p=y(n(1622)),d=y(n(8161)),h=n(85);function y(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refMap=l.default.createRef(),n.onMapCenterChanged=(0,i.debounce)(function(){var e=n.refMap.current.getCenter();e={lat:e.lat(),lng:e.lng()},s.default.getDistance({latitude:n.state.center.lat,longitude:n.state.center.lng},{latitude:e.lat,longitude:e.lng})>n.props.reloadCenterDistance&&n.setState({center:e})},500),n.onMouseMove=function(e){var t=n.props.formData;if(t.fromNodeId&&!t.toNodeId){var r={lat:e.latLng.lat(),lng:e.latLng.lng()};n.setState({mousePosition:r})}},n.mvcArrayToArray=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=[];return e.forEach(function(e,r){r!==t&&n.push({lat:e.lat(),lng:e.lng()})}),n},n.onPolylineComplete=function(e){var t=n.mvcArrayToArray(e.getPath());t.length&&((0,n.props.onChange)(t),e.setMap(null))},n.state={drawing:!e.value||0==e.value.length,center:e.defaultCenter,nodes:[],mousePosition:null,pipes:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"componentWillUnmount",value:function(){this.onMapCenterChanged.cancel()}},{key:"componentDidMount",value:function(){var e=this;(0,this.props.dataProvider)(h.CUSTOM,"pipes",{}).then(function(t){t&&t.data&&t.data.length?e.setState({pipes:t.data}):e.setState({pipes:[]})})}},{key:"render",value:function(){var e=this.props,t=e.defaultCenter,n=e.defaultZoom,a=e.dataProvider,o=e.value,u=void 0===o?[]:o,i=e.onChange,s=e.mapitemprops,h=void 0===s?{}:s,y=e.formData,m=this.state.pipes;return l.default.createElement(c.MapRender,{refMap:this.refMap,onCenterChanged:this.onMapCenterChanged,defaultZoom:n,defaultCenter:t,options:{maxHeight:"450px"}},l.default.createElement(d.default,{dataProvider:a}),l.default.createElement(f.default,{editable:!0,path:u,onChange:i,mapitemprops:h}),m.length&&m.map(function(e){if(y.id!==e.id)return l.default.createElement(f.default,{key:e.id,path:e.polyline,onChange:i,mapitemprops:h})}),!u.length&&l.default.createElement(p.default,r({onPolylineComplete:this.onPolylineComplete,defaultDrawingMode:"polyline",defaultOptions:{drawingControl:!1,polylineOptions:{strokeColor:"#f44336",strokeOpacity:.8,strokeWeight:2,fillColor:"#f44336",fillOpacity:.35,zIndex:100,editable:!0,clickable:!0}}},this.props)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=!e.value||0==e.value.length;return r({},t,{drawing:n})}}]),t}();m.propTypes={defaultCenter:u.default.object,defaultZoom:u.default.number,dataProvider:u.default.func,onFromPositionChange:u.default.func.isRequired,onToPositionChange:u.default.func.isRequired,formData:u.default.object,value:u.default.any,onChange:u.default.func,mapitemprops:u.default.object,decorate:u.default.object,reloadCenterDistance:u.default.number},m.defaultProps={reloadCenterDistance:1e3},t.default=m},8162:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=f(a),l=f(n(3)),u=n(412),i=n(48),s=n(34),c=f(n(8163));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={showInfoWindow:!0},r.handleMouseOver=function(){r.setState({showInfoWindow:!0})},r.handleMouseExit=function(){r.setState({showInfoWindow:!1})},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.state.showInfoWindow,t=this.props,n=t.info,r=t.translate,a=t.type;return o.default.createElement("div",null,o.default.createElement(u.Marker,{key:n.id,position:n.position,icon:"/api/Icons/dropView/"+a+"Icon?size=64&status=normal",zIndex:200},e&&o.default.createElement(u.InfoWindow,{key:n.id},o.default.createElement("span",null,""!==a&&r("ra."+c.default.lowerCaseFirst(a))+": "+n.name,""===a&&""+n.name))))}}]),t}();d.defaultProps={type:""},d.propTypes={info:l.default.object,status:l.default.object,translate:l.default.func,type:l.default.string};var h=(0,i.compose)(s.translate);t.default=h(d)},8180:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=d(o),u=n(48),i=d(n(3)),s=d(n(176)),c=d(n(211)),f=d(n(994)),p=d(n(153));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),a(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.inputProps,a=e.yearCenter,o=e.yearRange,u=e.date,i=e.allowEmpty,s=e.fixUI,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["options","inputProps","yearCenter","yearRange","date","allowEmpty","fixUI"]),d=r({},t,{InputProps:{inputComponent:f.default,completeUI:!0,inputProps:{yearCenter:a,yearRange:o,date:u,allowEmpty:i,fixUI:s}},InputLabelProps:{shrink:!0}}),h=r({},n);return l.default.createElement(p.default,r({},c,{inputProps:h,options:d}))}}]),t}();h.propTypes={inputProps:i.default.object,options:i.default.object,className:i.default.string,classes:i.default.object,label:i.default.string,yearCenter:i.default.number,yearRange:i.default.number,date:i.default.bool,allowEmpty:i.default.any,fixUI:i.default.bool},(0,u.compose)(c.default)(h).defaultProps={yearCenter:(0,s.default)().year(),yearRange:4,allowEmpty:!0},t.default=h},8181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(48),a=n(306),o=function(e){return e&&e.__esModule?e:{default:e}}(n(211));var l=(0,r.compose)(o.default)(a.NumberInput);l.defaultProps={textAlign:"right"},t.default=l},8182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=p(o),u=p(n(3)),i=n(43),s=n(106),c=p(n(1440)),f=p(n(153));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,u=Array(o),c=0;c<o;c++)u[c]=arguments[c];return n=a=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.state={qr:""},a.refText=l.default.createRef(),a.renderInput=function(e){var t=e.value,n=d(e,["value"]);return a.state.qr!==t&&a.updateQrView(t||""),l.default.createElement(i.Input,r({},n,{value:t}))},a.updateQrView=(0,s.debounce)(function(e){a.unmount||a.setState({qr:e})},200),h(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),a(t,[{key:"componentWillUnmount",value:function(){this.unmount=!0}},{key:"render",value:function(){var e=this.props,t=e.options,n=e.inputProps,a=e.qrSize,u=d(e,["options","inputProps","qrSize"]),i=this.state.qr,s=r({},t,{InputProps:{inputComponent:this.renderInput},InputLabelProps:{shrink:!0}}),p=r({},n);return l.default.createElement(o.Fragment,null,l.default.createElement(f.default,r({},u,{inputProps:p,options:s})),l.default.createElement("br",null),i&&l.default.createElement(c.default,{value:i,size:a,renderAs:"svg"}))}}]),t}();y.propTypes={record:u.default.object,source:u.default.string,qrSize:u.default.number,onChange:u.default.func,defaultValue:u.default.string,init:u.default.string,options:u.default.any,inputProps:u.default.any},y.defaultProps={qrSize:128},t.default=y},8183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReferenceInput=t.ReferenceInputView=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=f(n(0)),o=f(n(3)),l=f(n(12)),u=n(34),i=f(n(299)),s=f(n(995)),c=f(n(1629));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var d=function(e){var t=e.allowEmpty,n=e.basePath,o=e.children,l=e.choices,u=e.classes,f=e.className,d=e.error,h=e.input,y=e.isRequired,m=e.isLoading,v=e.label,b=e.meta,g=e.onChange,C=e.resource,w=e.creportter,P=e.setPagination,O=e.setSort,_=e.source,j=(e.translate,e.warning),E=(e.fullWidth,p(e,["allowEmpty","basePath","children","choices","classes","className","error","input","isRequired","isLoading","label","meta","onChange","resource","creportter","setPagination","setSort","source","translate","warning","fullWidth"]));return m?a.default.createElement(i.default,{label:v,source:_,resource:C,className:f,isRequired:y},a.default.createElement(c.default,null)):d?a.default.createElement(s.default,{label:v,error:d}):a.default.cloneElement(o,r({allowEmpty:t,classes:u,className:f,input:h,isRequired:y,label:v,resource:C,meta:r({},b,{helperText:j||!1}),source:_,choices:l,basePath:n,onChange:g,creportter:w,setPagination:P,setSort:O,translateChoice:!1},function(e){e.allowEmpty,e.basePath,e.choices,e.className,e.component,e.crudGetMatching,e.crudGetOne,e.defaultValue,e.filter,e.filterToQuery,e.formClassName,e.initializeForm,e.input,e.isRequired,e.label,e.locale,e.meta,e.onChange,e.optionValue,e.optionText,e.perPage,e.record,e.reference,e.referenceSource,e.resource,e.creportter,e.setPagination,e.setSort,e.sort,e.source,e.textAlign,e.translate,e.translateChoice,e.validation;return p(e,["allowEmpty","basePath","choices","className","component","crudGetMatching","crudGetOne","defaultValue","filter","filterToQuery","formClassName","initializeForm","input","isRequired","label","locale","meta","onChange","optionValue","optionText","perPage","record","reference","referenceSource","resource","creportter","setPagination","setSort","sort","source","textAlign","translate","translateChoice","validation"])}(E)))};t.ReferenceInputView=d,d.propTypes={allowEmpty:o.default.bool,basePath:o.default.string,children:o.default.element,choices:o.default.array,classes:o.default.object,className:o.default.string,error:o.default.string,input:o.default.object.isRequired,isLoading:o.default.bool,label:o.default.string,meta:o.default.object,onChange:o.default.func,resource:o.default.string.isRequired,creportter:o.default.func,setPagination:o.default.func,setSort:o.default.func,source:o.default.string,translate:o.default.func.isRequired,warning:o.default.string,isRequired:o.default.bool,fullWidth:o.default.any};var h=function(e){var t=e.children,n=e.filter,o=p(e,["children","filter"]);if(1!==a.default.Children.count(t))throw new Error("<ReferenceInput> only accepts a single child");var l=o.disabled?{id:"disabled"}:n;return a.default.createElement(u.ReferenceInputController,r({},o,{filter:l}),function(e){return a.default.createElement(d,r({},o,{filter:l},r({children:t},e)))})};t.ReferenceInput=h,h.propTypes={allowEmpty:o.default.bool.isRequired,basePath:o.default.string,children:o.default.element.isRequired,className:o.default.string,classes:o.default.object,filter:o.default.object,filterToQuery:o.default.func.isRequired,input:o.default.object.isRequired,label:o.default.string,meta:o.default.object,onChange:o.default.func,perPage:o.default.number,record:o.default.object,reference:o.default.string.isRequired,resource:o.default.string.isRequired,sort:o.default.shape({field:o.default.string,order:o.default.oneOf(["ASC","DESC"])}),source:o.default.string,translate:o.default.func.isRequired},h.defaultProps={allowEmpty:!1,filter:{},filterToQuery:function(e){return{q:e}},perPage:100,sort:{field:"id",order:"DESC"}};var y=(0,l.default)(u.addField,u.translate)(h);t.default=y},8184:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=p(o),u=p(n(3)),i=p(n(8185)),s=p(n(737)),c=p(n(8187)),f=p(n(153));function p(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function h(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,u=Array(o),f=0;f<o;f++)u[f]=arguments[f];return n=a=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.renderInput=function(e){var t=e.value,n=e.onChange,a=e.onBlur,o=(e.onKeyDown,e.onKeyUp,h(e,["value","onChange","onBlur","onKeyDown","onKeyUp"])),u=t||[];return l.default.createElement(c.default,r({value:u,onAdd:function(e){n((0,s.default)([].concat(d(u),[(0,i.default)(e)])))},onDelete:function(e,t){var r=[].concat(d(u));r.splice(t,1),n(r)},blurBehavior:"add",onBlur:function(){return a(u)}},o))},a.inputNormalize=function(e){return(0,i.default)(e)},y(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.inputProps,a=h(e,["options","inputProps"]),o=r({},t,{InputProps:{inputComponent:this.renderInput},InputLabelProps:{shrink:!0}}),u=r({},n);return l.default.createElement(f.default,r({},a,{inputProps:u,options:o}))}}]),t}();m.propTypes={options:u.default.object,inputProps:u.default.object},t.default=m},8187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultChipRenderer=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=p(n(0)),l=p(n(3)),u=p(n(413)),i=p(n(600)),s=p(n(1588)),c=p(n(1591)),f=p(n(20));function p(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=t.defaultChipRenderer=function(e,t){var n=e.text,r=e.isFocused,a=e.isDisabled,l=e.handleClick,u=e.handleDelete,s=e.className;return o.default.createElement(i.default,{key:t,className:s,style:{pointerEvents:a?"none":void 0,backgroundColor:r?c.default[300]:void 0},onClick:l,onDelete:u,label:n})},m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFocused:!1,errorText:void 0,isClean:!0,chips:[],focusedChip:null,inputValue:""},n.focus=function(){n.actualInput.focus(),null!=n.state.focusedChip&&n.setState({focusedChip:null})},n.handleInputBlur=function(e){if(e.preventDefault(),n.props.onBlur&&n.props.onBlur(e),n.setState({isFocused:!1}),null!=n.state.focusedChip&&n.setState({focusedChip:null}),"add"===n.props.blurBehavior){var t=(n.props.value||n.state.chips).length,r=e.target.value;n.inputBlurTimeout=setTimeout(function(){var e=(n.props.value||n.state.chips).length;t===e?n.handleAddChip(r):n.clearInput()},150)}else"clear"===n.props.blurBehavior&&n.clearInput()},n.handleInputFocus=function(e){n.setState({isFocused:!0}),n.props.onFocus&&n.props.onFocus(e)},n.handleKeyDown=function(e){var t=n.state.focusedChip;if(n.setState({keyPressed:!1,preventChipCreation:!1}),n.props.newChipKeyCodes.indexOf(e.keyCode)>=0)e.preventDefault(),n.handleAddChip(e.target.value);else if(8===e.keyCode||46===e.keyCode){if(""===e.target.value){var r=n.props.value||n.state.chips;if(null==t&&8===e.keyCode)n.setState({focusedChip:r.length-1});else if(null!=t){var a=n.props.value||n.state.chips,o=a[t];n.handleDeleteChip(o,t),8===e.keyCode&&t>0?n.setState({focusedChip:t-1}):46===e.keyCode&&t<=a.length-1&&n.setState({focusedChip:t})}}}else if(37===e.keyCode){var l=n.props.value||n.state.chips;if(null==t&&""===e.target.value&&l.length)return n.setState({focusedChip:l.length-1});null!=t&&t>0&&n.setState({focusedChip:t-1})}else if(39===e.keyCode){var u=n.props.value||n.state.chips;null!=t&&t<u.length-1?n.setState({focusedChip:t+1}):n.setState({focusedChip:null})}else n.setState({focusedChip:null})},n.handleKeyUp=function(e){!n.state.preventChipCreation&&n.props.newChipKeyCodes.indexOf(e.keyCode)>0&&n.state.keyPressed?n.clearInput():n.setState({inputValue:e.target.value})},n.handleKeyPress=function(e){n.setState({keyPressed:!0})},n.handleUpdateInput=function(e){var t=n.props.inputNormalize?n.props.inputNormalize(e.target.value):e.target.value;n.setState({inputValue:t}),n.props.onUpdateInput&&n.props.onUpdateInput(t)},n.setInputRef=function(e){n.input=e},e.defaultValue&&(n.state.chips=e.defaultValue),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),a(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.inputBlurTimeout)}},{key:"componentDidMount",value:function(){}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.disabled&&this.setState({focusedChip:null})}},{key:"blur",value:function(){this.input&&this.actualInput.blur()}},{key:"handleAddChip",value:function(e){var t=this;if(this.props.onBeforeAdd&&!this.props.onBeforeAdd(e))return this.setState({preventChipCreation:!0});this.setState({inputValue:""});var n=this.props.value||this.state.chips;if(this.props.dataSourceConfig){var r;if("string"==typeof e)h(r={},this.props.dataSourceConfig.text,e),h(r,this.props.dataSourceConfig.value,e),e=r;!this.props.allowDuplicates&&n.some(function(n){return n[t.props.dataSourceConfig.value]===e[t.props.dataSourceConfig.value]})||(this.props.value&&this.props.onAdd?this.props.onAdd(e):(this.setState({chips:[].concat(d(this.state.chips),[e])}),this.props.onChange&&this.props.onChange([].concat(d(this.state.chips),[e]))))}else e.trim().length>0&&(this.props.allowDuplicates||-1===n.indexOf(e))&&(this.props.value&&this.props.onAdd?this.props.onAdd(e):(this.setState({chips:[].concat(d(this.state.chips),[e])}),this.props.onChange&&this.props.onChange([].concat(d(this.state.chips),[e]))))}},{key:"handleDeleteChip",value:function(e,t){if(this.props.value)this.props.onDelete&&this.props.onDelete(e,t);else{var n=this.state.chips.slice();if(n.splice(t,1)){var r=this.state.focusedChip;this.state.focusedChip===t?r=null:this.state.focusedChip>t&&(r=this.state.focusedChip-1),this.setState({chips:n,focusedChip:r}),this.props.onChange&&this.props.onChange(n)}}}},{key:"clearInput",value:function(){this.setState({inputValue:""})}},{key:"render",value:function(){var e,t=this,n=this.props,a=(n.allowDuplicates,n.blurBehavior,n.children,n.chipRenderer),l=void 0===a?y:a,i=n.classes,s=(n.className,n.defaultValue,n.dataSource,n.dataSourceConfig),c=n.disabled,p=n.disableUnderline,d=n.error,m=(n.filter,n.FormHelperTextProps,n.fullWidth,n.fullWidthInput),v=(n.helperText,n.helperTextClassName,n.id),b=n.inputRef,g=(n.InputLabelProps,n.label),C=(n.labelClassName,n.newChipKeyCodes,n.onBeforeAdd,n.onAdd,n.onDelete,n.onBlur,n.onChange,n.onFocus,n.onUpdateInput,n.placeholder),w=(n.required,n.rootRef,n.value,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["allowDuplicates","blurBehavior","children","chipRenderer","classes","className","defaultValue","dataSource","dataSourceConfig","disabled","disableUnderline","error","filter","FormHelperTextProps","fullWidth","fullWidthInput","helperText","helperTextClassName","id","inputRef","InputLabelProps","label","labelClassName","newChipKeyCodes","onBeforeAdd","onAdd","onDelete","onBlur","onChange","onFocus","onUpdateInput","placeholder","required","rootRef","value"])),P=this.props.value||this.state.chips,O=(this.props.value||this.state.chips).length>0||this.state.inputValue.length>0,_=null!=g&&(O||this.state.isFocused);return o.default.createElement("div",{className:(0,f.default)(i.chipContainer,(e={},h(e,i.inkbar,!p),h(e,i.focused,this.state.isFocused),h(e,i.underline,!p),h(e,i.disabled,c),h(e,i.labeled,null!=g),h(e,i.error,d),e))},P.map(function(e,n){var r=s?e[s.value]:e;return l({value:r,text:s?e[s.text]:e,chip:e,isDisabled:!!c,isFocused:t.state.focusedChip===n,handleClick:function(){return t.setState({focusedChip:n})},handleDelete:function(){return t.handleDeleteChip(r,n)},className:i.chip},n)}),o.default.createElement(u.default,r({ref:this.setInputRef,classes:{input:i.input,root:i.inputRoot},id:v,value:this.state.inputValue,onChange:this.handleUpdateInput,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onKeyUp:this.handleKeyUp,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,inputRef:function(e){t.actualInput=e,b(e)},disabled:c,disableUnderline:!0,fullWidth:m,placeholder:O||!_&&null!=g?null:C},w)))}}]),t}();m.propTypes={style:l.default.object,chipContainerStyle:l.default.object,dataSourceConfig:l.default.shape({text:l.default.string.isRequired,value:l.default.string.isRequired}),disabled:l.default.bool,defaultValue:l.default.array,onChange:l.default.func,value:l.default.array,onBeforeAdd:l.default.func,onAdd:l.default.func,onDelete:l.default.func,dataSource:l.default.array,onUpdateInput:l.default.func,chipRenderer:l.default.func,newChipKeyCodes:l.default.arrayOf(l.default.number),allowDuplicates:l.default.bool,fullWidth:l.default.bool,fullWidthInput:l.default.bool,inputRef:l.default.func,blurBehavior:l.default.oneOf(["clear","add","ignore"]),inputNormalize:l.default.func,onBlur:l.default.any,onFocus:l.default.any,classes:l.default.object},m.defaultProps={newChipKeyCodes:[13],blurBehavior:"add",allowDuplicates:!1,inputRef:function(){}},t.default=(0,s.default)(function(e){return{root:{},chipContainer:{cursor:"text",marginBottom:-2,minHeight:40,"&$labeled":{marginTop:18},marginTop:e.spacing(3)},labelShrink:{top:0},labeled:{},helperText:{marginBottom:-20},error:{"&:after":{backgroundColor:e.palette.error.A400,transform:"scaleX(1)"}},chip:{margin:"0 8px 8px 0",float:"left"}}})(m)},8188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),l=m(o),u=n(48),i=m(n(176)),s=m(n(20)),c=n(34);n(278);var f=m(n(3)),p=n(731),d=m(n(712)),h=m(n(211)),y=m(n(153));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}n(714);var b=function(e){var t=e.value,n=e.className,r=v(e,["value","className"]);return l.default.createElement(p.MuiPickersUtilsProvider,{utils:d.default,locale:r.locale,moment:i.default},l.default.createElement(p.TimePicker,a({value:t||null,format:"LT",clearable:!0},r,{className:(0,s.default)("date-input-fix",n),animateYearScrolling:!1})))};b.propTypes={locale:f.default.string,value:f.default.any,className:ProcessingInstruction.string};var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),r(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.inputProps,r=e.className,o=e.label,u=v(e,["options","inputProps","className","label"]),i=a({},t,{InputProps:{inputComponent:b,completeUI:!0,inputProps:{label:l.default.createElement(c.FieldTitle,{label:o,source:u.source,resource:u.resource,isRequired:u.isRequired})}}}),f=a({},n);return l.default.createElement(y.default,a({label:""},u,{className:(0,s.default)(r),inputProps:f,options:i}))}}]),t}();g.propTypes={inputProps:f.default.object,options:f.default.object,className:f.default.string,classes:f.default.object,label:f.default.string};var C=(0,u.compose)(h.default)(g);t.default=C},8189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=p(o),u=n(48);n(278);var i=p(n(3)),s=p(n(211)),c=p(n(8190)),f=p(n(153));function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),a(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.inputProps,a=e.types,o=e.defaultValue,u=(e.defaultType,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["options","inputProps","types","defaultValue","defaultType"])),i=r({},t,{InputProps:{inputComponent:c.default,completeUI:!0,inputProps:{types:a,defaultValue:o}},InputLabelProps:{shrink:!0}}),s=r({},n);return l.default.createElement(f.default,r({},u,{inputProps:s,options:i}))}}]),t}();d.propTypes={inputProps:i.default.object,options:i.default.object,className:i.default.string,classes:i.default.object,label:i.default.string,types:i.default.arrayOf(i.default.string),defaultType:i.default.string,defaultValue:i.default.any};var h=(0,u.compose)(s.default)(d);t.default=h},8190:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=v(o),u=v(n(3)),i=n(48),s=v(n(176)),c=v(n(20)),f=n(34),p=n(43),d=v(n(8191)),h=v(n(1452)),y=v(n(994)),m=v(n(17));function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChangeType=function(e){var t=n.props.value,r=t.from,a=t.to,o=e.target.value,l=r?(0,s.default)(r).startOf(o).toDate():r,u=a?(0,s.default)(a).startOf(o).toDate():a;n.props.onChange({from:l,to:u,type:o})},n.renderTypes=function(e){var t=e.value,r=e.types,a=e.classes;if(!r||1===r.length)return null;var o=t.type;return o?l.default.createElement("div",{style:{float:"left"}},l.default.createElement("div",{style:{width:"100%",height:10}}),l.default.createElement(p.Select,{onChange:n.onChangeType,value:o,className:a.typeInput},r.map(function(e){return l.default.createElement(p.MenuItem,{dense:!0,key:e,value:e},n.props.translate("ra.input.timeRanges."+e))}))):null},n.onChangeHourFromTo=function(e){var t=n.props,a=t.onChange,o=t.value;if(e){var l=(0,s.default)(e);a(n.fixFromTo(r({},o,{from:l.startOf("day").toDate(),to:l.endOf("day").toDate()})))}else a(r({},o,{from:null,to:null}))},n.onChangeFrom=function(e){var t=n.props,a=t.onChange,o=t.value,l=o.to;a(e?n.fixFromTo(r({},o,{from:e,to:l})):r({},o,{from:null,to:null}))},n.onChangeTo=function(e){var t=n.props,a=t.onChange,o=t.value,l=o.from;a(e?n.fixFromTo(r({},o,{from:l,to:e})):r({},o,{from:null,to:null}))},n.fixFromTo=function(e){var t=e.from,n=e.to,r=e.type;return t&&n&&t.getTime()>n.getTime()?{type:r,from:n,to:t}:e},n.renderFromTo=function(e){var t=e.className,r=e.value,a=e.translate,o=e.yearCenter,l=e.yearRange,u=e.classes,i=e.allowEmpty,s=r.from,c=r.to,f=(0,m.default)(r,"type");switch(f){case"hour":return n.renderDay({key:"from",value:r,onChange:n.onChangeHourFromTo,className:t,classes:u,translate:a,format:"L",type:f});case"day":return[n.renderDay({key:"from",value:r,onChange:n.onChangeFrom,className:t,classes:u,translate:a,format:"L",type:f}),n.renderDay({key:"to",value:r,onChange:n.onChangeTo,className:t,classes:u,translate:a,format:"L",type:f})];case"month":return[n.renderMonth({key:"from",value:r,onChange:n.onChangeFrom,className:t,classes:u,translate:a}),n.renderMonth({key:"to",value:r,onChange:n.onChangeTo,className:t,classes:u,translate:a})];case"year":return[n.renderYear({key:"from",translate:a,className:t,yearValue:s,yearCenter:o,yearRange:l,allowEmpty:i,classes:u,onChange:n.onChangeFrom}),n.renderYear({translate:a,key:"to",className:t,yearValue:c,yearCenter:o,yearRange:l,allowEmpty:i,classes:u,onChange:n.onChangeTo})];default:return null}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"renderHour",value:function(e){var t=e.translate,n=e.value,a=e.key,o=(e.allowEmpty,e.className),u=e.classes,i=b(e,["translate","value","key","allowEmpty","className","classes"]),s=n[a];return l.default.createElement(p.FormControl,{key:a,className:(0,c.default)(u.dateInput,o)},l.default.createElement(p.InputLabel,{shrink:!0,htmlFor:"age-label-placeholder"},t("ra.input.timeRanges."+a)),l.default.createElement(d.default,r({key:a,date:!0,value:s,fixUI:!1},i,{className:(0,c.default)(u.dateInput,o)})))}},{key:"renderDay",value:function(e){var t=e.translate,n=e.value,a=e.key,o=(e.allowEmpty,e.className),u=e.classes,i=e.type,s=b(e,["translate","value","key","allowEmpty","className","classes","type"]),f=n[a],d=t("hour"===i?"ra.input.timeRanges.day":"ra.input.timeRanges."+a);return l.default.createElement(p.FormControl,{key:a,className:(0,c.default)(u.dateInput,o)},l.default.createElement(p.InputLabel,{shrink:!0,htmlFor:"age-label-placeholder"},d),l.default.createElement(h.default,r({fixUI:!1,key:a,date:!0,value:f},s,{className:(0,c.default)(u.dateInput,o)})))}},{key:"renderMonth",value:function(e){var t=e.translate,n=e.value,a=e.key,o=(e.allowEmpty,e.className),u=e.classes,i=b(e,["translate","value","key","allowEmpty","className","classes"]),s=n[a];return l.default.createElement(p.FormControl,{key:a,className:(0,c.default)(u.monthInput,o)},l.default.createElement(p.InputLabel,{shrink:!0,htmlFor:"age-label-placeholder"},t("ra.input.timeRanges."+a)),l.default.createElement(y.default,r({key:a,date:!0,fixUI:!1,value:s},i,{className:(0,c.default)(u.monthInput,o)})))}},{key:"renderYear",value:function(e){var t=e.yearValue,n=e.yearCenter,a=e.yearRange,o=e.translate,u=e.key,i=e.allowEmpty,f=e.onChange,d=e.classes,h=e.className,y=b(e,["yearValue","yearCenter","yearRange","translate","key","allowEmpty","onChange","classes","className"]),m=t?(0,s.default)(t).year():"",v=[];i&&v.push(l.default.createElement(p.MenuItem,{dense:!0,key:0,value:""}));for(var g=n-a;g<n+a;g++)v.push(l.default.createElement(p.MenuItem,{dense:!0,key:g,value:g},g));return l.default.createElement(p.FormControl,{key:u,className:(0,c.default)(d.dateInput,h)},l.default.createElement(p.InputLabel,{shrink:!0,htmlFor:"age-label-placeholder"},o("ra.input.timeRanges."+u)),l.default.createElement(p.Select,r({value:m,className:(0,c.default)(d.yearInputElement)},y,{onChange:function(e){var t=e.target.value;f(t?(0,s.default)(t,"YYYY").toDate():t)}}),v))}},{key:"render",value:function(){var e=this.props.className;return l.default.createElement("div",{style:{flexWrap:"wrap"},className:e},this.renderTypes(this.props),this.renderFromTo(this.props))}}]),t}();g.propTypes={className:u.default.string,classes:u.default.object,value:u.default.any,types:u.default.arrayOf(u.default.string),defaultType:u.default.string,onChange:u.default.func,translate:u.default.func,yearCenter:u.default.number,yearRange:u.default.number,allowEmpty:u.default.bool},g.defaultProps={yearCenter:(0,s.default)().year(),yearRange:4,defaultType:"date",type:"date"};var C=(0,i.compose)(f.translate,(0,p.withStyles)(function(){return{typeInput:{marginRight:"8px"},dateInput:{float:"left",display:"inline",marginRight:"8px",paddingTop:"4px"},monthInput:{float:"left",display:"inline",marginRight:"8px",paddingTop:"5px"},yearInput:{float:"left",display:"inline",marginRight:"8px",paddingTop:"4px"},yearInputElement:{marginTop:"6px !important"}}}));t.default=C(g)},8191:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=p(o),u=p(n(176)),i=p(n(20));n(278);var s=p(n(3)),c=n(731),f=p(n(712));function p(e){return e&&e.__esModule?e:{default:e}}n(714);var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.className,a=e.format,o=e.onChange,s=(e.date,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value","className","format","onChange","date"])),p="string"==typeof t?(0,u.default)(t,a.length<=18?a:void 0):t;return l.default.createElement(c.MuiPickersUtilsProvider,{utils:f.default,locale:s.locale,moment:u.default},l.default.createElement(c.DateTimePicker,r({value:p||null,format:a,clearable:!0},s,{onChange:function(e){return o(e?"string"==typeof e?(0,u.default)(e,a):e.toDate():e)},className:(0,i.default)("date-input-fix",n),animateYearScrolling:!1})))}}]),t}();d.propTypes={locale:s.default.string,value:s.default.any,className:s.default.string,format:s.default.string,date:s.default.bool,onChange:s.default.func},d.defaultProps={format:"L LT"},t.default=d},8192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),i=p(u),s=p(n(3)),c=n(34),f=p(n(176));function p(e){return e&&e.__esModule?e:{default:e}}var d=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.PureComponent),l(t,[{key:"choices",value:function(){for(var e=this.props,t=e.center,n=e.range,r=[],a=t-n;a<t+n;a++)r.push({id:""+a,name:""+a});return r}},{key:"render",value:function(){var e=this.props,t=(e.center,e.range,e.date,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["center","range","date"]));return i.default.createElement(c.SelectInput,o({},t,{choices:this.choices(),translateChoice:!1}))}}]),t}(),r.propTypes={center:s.default.number,range:s.default.number,date:s.default.any},r.defaultProps={center:(0,f.default)().year(),range:3},a);t.default=d},8193:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=h(o),u=h(n(3)),i=h(n(20)),s=n(48),c=n(26),f=h(n(211)),p=h(n(153)),d=h(n(8194));function h(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,u=Array(o),i=0;i<o;i++)u[i]=arguments[i];return n=a=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),a.renderInput=function(e){e.onBlur,e.onKeyDown,e.onKeyUp;var t=e.dataProvider,n=y(e,["onBlur","onKeyDown","onKeyUp","dataProvider"]);return l.default.createElement(d.default,r({dataProvider:t},n))},m(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.inputProps,a=e.className,o=e.dataProvider,u=(e.classes,e.filterFiles),s=e.translate,c=e.storage,f=e.accept,d=y(e,["options","inputProps","className","dataProvider","classes","filterFiles","translate","storage","accept"]),h=r({},t,{InputProps:{inputComponent:this.renderInput},InputLabelProps:{shrink:!0}}),m=r({},n,{dataProvider:o,filterFiles:u,translate:s,storage:c,accept:f});return l.default.createElement(p.default,r({},d,{inputProps:m,options:h,className:(0,i.default)(a)}))}}]),t}();v.propTypes={options:u.default.object,inputProps:u.default.object,className:u.default.any,classes:u.default.object,dataProvider:u.default.func,filterFiles:u.default.any,translate:u.default.any,storage:u.default.string,accept:u.default.string};var b=(0,s.compose)(f.default,(0,c.withStyles)(function(){return{input:{width:"100%"}}}),c.withTheme)(v);t.default=b},8194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),o=d(a),l=n(26),u=n(130),i=d(n(17)),s=n(48);n(278);var c=d(n(3)),f=n(117),p=d(n(192));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,o){try{var l=t[a](o),u=l.value}catch(e){return void n(e)}if(!l.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(714);var m=function(e){function t(){var e,n,r,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return n=r=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={saving:!1},r.selectFile=function(e){var t=document.createElement("input");return t.setAttribute("type","file"),t.setAttribute("accept",e),t.click(),new Promise(function(e,n){t.onchange=function(t){t?e(t.path[0].files[0]):n("undefined")}})},r.fileToServer=function(){var e=h(regeneratorRuntime.mark(function e(t,n){var o,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({saving:!0}),e.next=3,r.props.dataProvider(f.UPLOAD,n,{subUrl:"upload",files:[t],fullUrl:!0}).finally(function(){return r.setState({saving:!1})});case 3:if(o=e.sent,l=(0,i.default)(o,"data.result.files.files[0].name")){e.next=7;break}throw new Error("error.UPLOAD_FILE_ERROR");case 7:return e.abrupt("return","/api/"+n+"/download"+l.substring(l.indexOf("/")));case 8:case"end":return e.stop()}},e,a)}));return function(t,n){return e.apply(this,arguments)}}(),r.checkTypeFile=function(e,t){var n=t.substring(t.lastIndexOf(".")+1);return!(!RegExp(n,"gi").test(e&&e.toString())&&e)},r.addFile=function(){var e=h(regeneratorRuntime.mark(function e(t,n,o){var l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.selectFile(o);case 2:if(l=e.sent,!r.checkTypeFile(t,l.name)){e.next=9;break}return e.next=7,r.fileToServer(l,n);case 7:u=e.sent,r.props.onChange({name:l.name,url:u});case 9:case"end":return e.stop()}},e,a)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.onLinkClick=function(e){e.preventDefault();var t=r.props,n=t.value,a=t.dataProvider,o=t.storage;n&&n.url&&a("URL_ONLY",o,{subUrl:"download/"+n.url.substring(n.url.lastIndexOf("/")+1)}).then(function(e){var t=(0,i.default)(e,"data.url");t&&(window.location=t)})},y(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.filterFiles,l=t.storage,i=t.value,s=t.accept,c=(i||{}).name,f=void 0===c?"":c,d=this.state.saving;return o.default.createElement(a.Fragment,null,o.default.createElement("div",{className:n.pathFile},o.default.createElement("div",{className:n.fixUrl}),o.default.createElement("a",{href:"#",onClick:this.onLinkClick},f)),o.default.createElement(p.default,{saving:d,label:"generic.file",onClick:function(){return e.addFile(r,l,s)}},o.default.createElement(u.Attachment,null)))}}]),t}();m.propTypes={locale:c.default.string,className:c.default.string,onChange:c.default.func,dataProvider:c.default.func,filterFiles:c.default.any,storage:c.default.string,value:c.default.any,accept:c.default.string,classes:c.default.any};var v=(0,s.compose)((0,l.withStyles)(function(){return{pathFile:{display:"inline-block",textOverflow:"ellipsis",overflow:"hidden",marginRight:5,minWidth:200},fixUrl:{height:10}}}),l.withTheme);t.default=v(m)},994:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),l=p(o),u=p(n(3)),i=n(48),s=p(n(20)),c=p(n(176)),f=n(43);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.parseMonth=function(e,t){var n=void 0,r=void 0;if(e)if(t&&e){var a=(0,c.default)(e);n=a.year(),r=a.month()+1}else{var o=(e||"0-0").toString().split("-");n=parseInt(o[0]||0)||void 0,r=parseInt(o[1]||0)||void 0}return{year:n,month:r}},n.handleMonthChange=function(e,t){var r=n.props,a=r.date,o=r.onChange;if(e){var l=(0,c.default)().startOf("month");l.month(e-1),t.year&&l.year(t.year),o(a?l.toDate():l.format("YYYY-MM"))}else o(null)},n.handleYearChange=function(e,t){var r=n.props,a=r.date,o=r.onChange;if(e){var l=(0,c.default)().startOf("month");l.year(e),t.month&&l.month(t.month-1),o(a?l.toDate():l.format("YYYY-MM"))}else o(null)},n.state=n.parseMonth(e.value,e.date),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.PureComponent),a(t,[{key:"renderYearItems",value:function(e,t){var n=[];this.props.allowEmpty&&n.push(l.default.createElement(f.MenuItem,{dense:!0,key:0,value:null}));for(var r=e-t;r<e+t;r++)n.push(l.default.createElement(f.MenuItem,{dense:!0,key:r,value:r},r));return n}},{key:"renderMonthItems",value:function(){var e=[];this.props.allowEmpty&&e.push(l.default.createElement(f.MenuItem,{dense:!0,key:0,value:null}));for(var t=1;t<=12;t++)e.push(l.default.createElement(f.MenuItem,{dense:!0,key:t,value:t},t));return e}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.value,o=t.yearCenter,u=t.yearRange,i=t.classes,c=t.date,p=(t.onChange,t.onBlur,t.allowEmpty,t.fixUI),d=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["className","value","yearCenter","yearRange","classes","date","onChange","onBlur","allowEmpty","fixUI"]),h=this.parseMonth(a,c);return l.default.createElement("div",{className:(0,s.default)(i.input,n)},l.default.createElement(f.FormControl,{className:i.formControl},!1!==p&&l.default.createElement("div",{style:{width:"100%",height:10}}),l.default.createElement(f.Select,r({value:h.month||""},d,{className:i.month,onChange:function(t){return e.handleMonthChange(t.target.value,h)}}),this.renderMonthItems())),l.default.createElement(f.FormControl,{className:i.formControl},!1!==p&&l.default.createElement("div",{style:{width:"100%",height:10}}),l.default.createElement(f.Select,r({value:h.year||""},d,{className:i.year,onChange:function(t){return e.handleYearChange(t.target.value,h)}}),this.renderYearItems(o,u))))}}]),t}();d.propTypes={className:u.default.string,value:u.default.any,yearCenter:u.default.number,yearRange:u.default.number,date:u.default.bool,onChange:u.default.func,onBlur:u.default.func,classes:u.default.object,allowEmpty:u.default.any,fixUI:u.default.any},d.defaultProps={yearCenter:(0,c.default)().year(),yearRange:4,allowEmpty:!0};var h=(0,i.compose)((0,f.withStyles)(function(e){return{input:{display:"flex",flexWrap:"wrap",paddingBottom:"0px"},month:{minWidth:"40px"},year:{minWidth:"70px"},formControl:{}}}));t.default=h(d)}}]);