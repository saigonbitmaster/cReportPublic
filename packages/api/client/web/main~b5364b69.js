(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{7239:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListController=void 0;var a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){n=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(0),i=R(r(3)),u=r(42),l=r(591),p=r(68),c=R(r(12)),f=r(8485),d=R(r(967)),h=R(r(259)),y=R(r(45)),g=R(r(491)),v=R(r(976)),m=r(7240),b=R(m),_=r(277),P=r(971),O=r(34),S=R(r(1421));function R(e){return e&&e.__esModule?e:{default:e}}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=t.ListController=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.getCurrentFilter=function(e){var t=e||r.getQuery(),a=r.props.fields,s=t.filter,o=r.props.filter,i=r.props.fixUrl,u=n({},s,o,{$fixUrl:i});return r.props.fixFilter&&(u=r.props.fixFilter(u)),a&&(u.$fields=a),u},r.updateFilter=(0,h.default)(function(){r.updateData()},100),r.setSort=function(e){return r.changeParams({type:m.SET_SORT,payload:e})},r.setPage=function(e){return r.changeParams({type:m.SET_PAGE,payload:e})},r.creportters=(0,h.default)(function(e){if(!(0,y.default)(e,r.props.filterValues)){var t=(0,v.default)(e);r.changeParams({type:m.SET_FILTER,payload:t})}},r.props.debounce),r.showFilter=function(e,t){r.setState(E({},e,!0)),void 0!==t&&r.creportters(n({},r.props.filterValues,E({},e,t)))},r.hideFilter=function(e){r.setState(E({},e,!1));var t=(0,S.default)(r.props.filterValues,e);r.creportters(t)},r.handleSelect=function(e){r.props.setSelectedIds(r.props.resource,e)},r.handleUnselectItems=function(){r.props.setSelectedIds(r.props.resource,[])},r.handleToggleItem=function(e){r.props.toggleItem(r.props.resource,e)},r.setPerPage=function(e){return r.changeParams({type:m.SET_PER_PAGE,payload:e})};var a=e.resetOnInit,s=void 0!==a&&a;return r.state={ready:!s},s&&r.updateData({filter:{$reset:!0}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),s(t,[{key:"componentDidMount",value:function(){this.props.refController&&(this.props.refController.current=this),this.state.ready||this.setState({ready:!0}),!this.props.query.page&&!(this.props.ids||[]).length&&this.props.params.page>1&&this.props.total>0?this.setPage(this.props.params.page-1):(this.updateData(),Object.keys(this.props.query).length>0&&this.props.changeListParams(this.props.resource,this.props.query),this.props.refController&&(this.props.refController.current=this))}},{key:"componentWillUnmount",value:function(){this.creportters.cancel(),this.updateFilter.cancel()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.sub?e.resource===this.props.resource&&e.params.sort===this.props.params.sort&&e.params.order===this.props.params.order&&e.params.page===this.props.params.page&&e.query.perPage===this.props.query.perPage&&(0,y.default)(e.query.filter,this.props.query.filter)&&(0,y.default)(e.filter,this.props.filter)&&(0,y.default)(e.sort,this.props.sort)&&(0,y.default)(e.perPage,this.props.perPage)||this.updateData(e.params):e.resource===this.props.resource&&e.query.sort===this.props.query.sort&&e.query.order===this.props.query.order&&e.query.page===this.props.query.page&&e.query.filter===this.props.query.filter||this.updateData(Object.keys(e.query).length>0?e.query:e.params),e.version!==this.props.version&&this.updateData()}},{key:"shouldComponentUpdate",value:function(e,t){return e.translate!==this.props.translate||e.isLoading!==this.props.isLoading||e.version!==this.props.version||t!==this.state||e.data!==this.props.data||e.selectedIds!==this.props.selectedIds}},{key:"getBasePath",value:function(){return this.props.location.pathname.replace(/\/$/,"")}},{key:"getQuery",value:function(){var e=Object.keys(this.props.query).length>0?this.props.query:n({},this.props.params),t=this.props.filterDefaultValues||{};return e.filter=n({},t,e.filter),e.sort||(e.sort=this.props.sort.field,e.order=this.props.sort.order),e.perPage||(e.perPage=this.props.perPage),e.page||(e.page=1),e}},{key:"updateData",value:function(e){var t=e||this.getQuery(),r=t.sort,a=t.order,n=t.page,s=void 0===n?1:n,o=t.perPage,i={page:parseInt(s,10),perPage:parseInt(o,10)},u=this.getCurrentFilter(e);this.props.onFilterChange&&this.props.onFilterChange(u),this.props.crudGetList(this.props.resource,i,{field:r,order:a},u)}},{key:"changeParams",value:function(e){var t=(0,b.default)(this.getQuery(),e);this.props.sub||this.props.push(n({},this.props.location,{search:"?"+(0,l.stringify)(n({},t,{filter:JSON.stringify(t.filter)}))})),this.props.changeListParams(this.props.resource,t),this.handleUnselectItems()}},{key:"render",value:function(){if(!this.state.ready)return null;var e=this.props,t=e.children,r=e.resource,s=e.hasCreate,o=e.data,i=e.ids,u=e.total,l=e.isLoading,p=e.translate,c=e.version,f=e.selectedIds,h=this.getQuery(),y=Object.entries(o).map(function(e,t){var r=a(e,2),s=r[0],o=r[1];return E({},s,n({},o,{ra_index:t+1}))}).reduce(function(e,t){return n({},e,t)},{}),g=h.filter||{},v=this.getBasePath(),m=p("ra.page.list",{name:""+p("resources."+r+".name",{smart_count:2,_:d.default.humanize(d.default.pluralize(r))})});return t({basePath:v,currentSort:{field:h.sort,order:h.order},data:y,defaultTitle:m,displayedFilters:this.state,filterValues:g,hasCreate:s,hideFilter:this.hideFilter,ids:i,isLoading:l,onSelect:this.handleSelect,onToggleItem:this.handleToggleItem,onUnselectItems:this.handleUnselectItems,page:parseInt(h.page||1,10),perPage:parseInt(h.perPage,10),refresh:this.refresh,selectedIds:f,creportters:this.creportters,setPage:this.setPage,setSort:this.setSort,showFilter:this.showFilter,setPerPage:this.setPerPage,translate:p,total:u,version:c})}}]),t}();T.propTypes={refController:i.default.any,resetOnInit:i.default.bool,children:i.default.func.isRequired,filter:i.default.object,filters:i.default.element,filterDefaultValues:i.default.object,pagination:i.default.element,perPage:i.default.number.isRequired,sort:i.default.shape({field:i.default.string,order:i.default.string}),authProvider:i.default.func,changeListParams:i.default.func.isRequired,crudGetList:i.default.func.isRequired,data:i.default.object,debounce:i.default.number,filterValues:i.default.object,hasCreate:i.default.bool.isRequired,hasEdit:i.default.bool.isRequired,hasList:i.default.bool.isRequired,hasShow:i.default.bool.isRequired,ids:i.default.array,selectedIds:i.default.array,isLoading:i.default.bool.isRequired,location:i.default.object.isRequired,path:i.default.string,params:i.default.object.isRequired,push:i.default.func.isRequired,query:i.default.object.isRequired,resource:i.default.string.isRequired,setSelectedIds:i.default.func.isRequired,toggleItem:i.default.func.isRequired,total:i.default.number.isRequired,translate:i.default.func.isRequired,sub:i.default.bool,fixUrl:i.default.string,fixFilter:i.default.func,onFilterChange:i.default.func,version:i.default.number,fields:i.default.object},T.defaultProps={debounce:500,filter:{},filterValues:{},perPage:10,sort:{field:"id",order:m.SORT_DESC}};var w=["page","perPage","sort","order","filter"],I=(0,f.createSelector)(function(e){return e.location.pathname},function(e){return e.location.search},function(e,t){var r=(0,g.default)((0,l.parse)(t),function(e,t){return-1!==w.indexOf(t)});if(r.filter&&"string"==typeof r.filter)try{r.filter=JSON.parse(r.filter)}catch(e){delete r.filter}return r});t.default=(0,c.default)((0,u.connect)(function(e,t){var r=e.admin.resources[t.resource];return{query:I(t),params:r.list.params,ids:r.list.ids,selectedIds:r.list.selectedIds,total:r.list.total,data:r.data,isLoading:e.admin.loading>0,filterValues:r.list.params.filter,version:e.admin.ui.viewVersion}},{crudGetList:_.crudGetList,changeListParams:P.changeListParams,setSelectedIds:P.setListSelectedIds,toggleItem:P.toggleListItem,push:p.push}),O.translate)(T)},8231:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.handleUndoRace=d,t.default=h;var n=r(408),s=r(472),o=r(277),i=r(709),u=r(24),l=r(1250),p=regeneratorRuntime.mark(d),c=regeneratorRuntime.mark(h);function f(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}function d(e){var t,r,c,d,h,y,g,v,m,b,_,P,O,S,R,E,T,w;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload.action,r=t.meta,c=r.onSuccess,d=void 0===c?{}:c,h=r.onFailure,y=void 0===h?{}:h,g=r.deleteData,v=void 0===g?{}:g,m=f(r,["onSuccess","onFailure","deleteData"]),p.next=4,(0,u.put)((0,s.startOptimisticMode)());case 4:return b=l.CUSTOM_UNDOABLE,v&&v.resource&&(b=v.id?o.CRUD_DELETE_OPTIMISTIC:o.CRUD_DELETE_MANY_OPTIMISTIC),p.next=8,(0,u.put)(a({},t,{type:b+"_OPTIMISTIC",meta:a({},v,m,d,{optimistic:!0})}));case 8:return p.next=10,(0,u.race)({undo:(0,u.take)(s.UNDO),complete:(0,u.take)(s.COMPLETE)});case 10:return _=p.sent,P=_.complete,p.next=14,(0,u.put)((0,s.stopOptimisticMode)());case 14:if(!P){p.next=34;break}if("function"!=typeof t.payload){p.next=30;break}return p.next=18,t.payload();case 18:if(O=p.sent,R=(S=O||{}).error,E=S.data,T=void 0===E?null:E,!R){p.next=25;break}return p.next=23,(0,u.put)({type:b+"_FAILURE",error:R.message?R.message:R,payload:R.body?R.body:null,requestPayload:t.payload,meta:a({},y,{type:b,status:l.CUSTOM_UNDOABLE+"_ERROR"})});case 23:p.next=28;break;case 25:return d.notification,w=f(d,["notification"]),p.next=28,(0,u.put)({type:b+"_SUCCESS",payload:T,requestPayload:t.payload,meta:a({},w,{type:b,status:b+"_SUCCESS"})});case 28:p.next=32;break;case 30:return p.next=32,(0,u.put)(a({},t,{meta:a({},m,{onSuccess:{refresh:!0},onFailure:a({},y,{refresh:!0})})}));case 32:p.next=38;break;case 34:return p.next=36,(0,u.put)((0,n.showNotification)("ra.notification.canceled"));case 36:return p.next=38,(0,u.put)((0,i.refreshView)());case 38:case"end":return p.stop()}},p,this)}function h(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.takeEvery)(l.CUSTOM_UNDOABLE,d);case 2:case"end":return e.stop()}},c,this)}},8232:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var a=r(24),n=r(480),s=regeneratorRuntime.mark(p),o=regeneratorRuntime.mark(c),i=regeneratorRuntime.mark(f),u=regeneratorRuntime.mark(d),l=regeneratorRuntime.mark(h);function p(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.fork)(c);case 2:return e.next=4,(0,a.fork)(d);case 4:case"end":return e.stop()}},s,this)}function c(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.takeEvery)(n.CHECK_REGISTER,function(e){return f(e)});case 2:case"end":return e.stop()}},o,this)}function f(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,a.select)(function(e){return e.customPage});case 2:if(r.sent[e.payload]){r.next=7;break}return t=e.payload,r.next=7,(0,a.put)({type:n.CUSTOM_PAGE_REGISTER_SCREEN,payload:t,meta:{screen:t}});case 7:case"end":return r.stop()}},i,this)}function d(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.takeEvery)(n.SEND_PARAMS,function(e){return h(e)});case 2:case"end":return e.stop()}},u,this)}function h(e){var t,r,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=e.meta.screen,o.next=3,(0,a.select)(function(e){return e.customPage});case 3:if(s=o.sent,!r||!s[r]){o.next=7;break}return o.next=7,(0,a.put)({type:n.CUSTOM_PAGE_SET_PARAMS,payload:t,meta:{screen:r}});case 7:case"end":return o.stop()}},l,this)}},8233:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(r(8234)),n=i(r(8235)),s=i(r(8236)),o=i(r(8237));function i(e){return e&&e.__esModule?e:{default:e}}t.default={dialog:a.default,rightDrawer:n.default,sfdata:s.default,customPage:o.default}},8234:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n=r(906);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{element:null,data:null},t=arguments[1],r=t.type,s=t.payload;switch(r){case n.UPDATE_DIALOG:return s;case n.DIALOG_DATA:return a({},e,{data:s});default:return e}}},8235:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n=r(966);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{element:null,options:null,updateCount:0},t=arguments[1],r=t.type,s=t.payload;switch(r){case n.UPDATE_RIGHT_DRAWER:return a({},s,{updateCount:e.updateCount+1});case n.RIGHT_DRAWER_DATA:return e.element?{element:e.element,options:s}:e;default:return e}}},8236:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n=function(e){return e&&e.__esModule?e:{default:e}}(r(348));var s={myaccess:null};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1],r=t.type,o=t.payload,i=t.meta;if(0===r.indexOf("SF_AUTO_")&&i&&i.autoReducer&&i.key){var u={};return(0,n.default)(u,i.key,o),a({},e,u)}return e}},8237:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReferenceResource=t.getResources=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n=r(480),s=i(r(8238)),o=i(r(8239));function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];if(t.type===n.CUSTOM_PAGE_REGISTER_SCREEN){var r={params:(0,s.default)(void 0,t),state:(0,o.default)(void 0,t)};return a({},e,u({},t.payload,r))}return t.type===n.CUSTOM_PAGE_UNREGISTER_SCREEN?Object.keys(e).reduce(function(r,n){return n===t.payload?r:a({},r,u({},n,e[n]))},{}):t.type===n.CUSTOM_PAGE_SET_PARAMS||t.type===n.CUSTOM_PAGE_SET_STATE?Object.keys(e).reduce(function(r,n){return a({},r,u({},n,t.meta.screen===n?{params:(0,s.default)(e[n].params,t),state:(0,o.default)(e[n].url,t)}:e[n]))},{}):e};t.getResources=function(e){return Object.keys(e).map(function(t){return e[t].props})},t.getReferenceResource=function(e,t){return e[t.reference]}},8238:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n=r(480),s={sort:null,order:null,page:1,perPage:null,filter:{}};t.default=function(e,t){void 0===e&&(e=s);var r=t.type,o=t.payload;switch(r){case n.CUSTOM_PAGE_SET_PARAMS:return o;case n.CUSTOM_PAGE_SET_FILTER:return a({filter:a({},o)},e);default:return e}}},8239:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(480),n={};t.default=function(e,t){void 0===e&&(e=n);var r=t.type,s=t.payload;switch(r){case a.CUSTOM_PAGE_SET_STATE:return s;default:return e}}}}]);